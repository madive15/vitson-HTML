// -----------------------------------------------------------------------------
// components/_label.scss
// - 라벨 및 선택형 UI 요소(라벨, 클릭 가능한 칩 버튼 등) 공통 스타일 정의.
// -----------------------------------------------------------------------------

@use 'sass:map';
@use '@/assets/scss/abstracts/variables' as var;
@use '@/assets/scss/abstracts/mixins' as mx;
@use '@/assets/scss/abstracts/functions' as fn;
@use '@/assets/scss/base/colors' as color;
@use '@/assets/scss/base/typography' as typo;
@use '@/assets/scss/components/icon' as icon;
@use '@/assets/scss/components/button' as button;

@mixin common-chip-button($type: null) {
  &-group {
    width: 100%;

    &:has(.vits-chip-button.type-outline) {
      @include mx.flex(flex, row, flex-start, flex-start);
      gap: map.get(var.$unit, 12);
      overflow: auto hidden;
    }

    &:has(.vits-chip-button.type-filled) {
      @include mx.flex(flex, row, flex-start, flex-start, wrap);
      gap: map.get(var.$unit, 8);
      overflow: hidden;
    }

    button {
      @include button.btn-reset;

      &.remove {
        @include icon.ic-size(map.get(var.$unit, 24));
        flex-shrink: 0;
      }
    }
  }

  &.type-#{$type} {
    display: flex;
    flex: 0 0 auto;
    gap: map.get(var.$unit, 2);
    align-items: center;
    min-width: 0;
    max-width: 100%;
    height: map.get(var.$unit, 32);
    padding: 0 map.get(var.$unit, 8) 0 map.get(var.$unit, 12);
    overflow: hidden;
    border-radius: map.get(var.$radius, 'xl');

    .text {
      @include mx.ellipsis-single;
      min-width: 0;

      &.category,
      &.team {
        flex: 0 3 auto;
        min-width: fn.rem(40);
      }

      &.name {
        flex: 0 1 auto;
      }
    }

    .remove,
    .icon {
      flex-shrink: 0;
    }

    .icon {
      @include icon.ic-size(map.get(var.$unit, 20));
      margin-left: map.get(var.$unit, 2) * -1;
    }

    @if $type == 'outline' {
      @include mx.border('all', $color: map.get(color.$layout-border, 'tertiary'));
      background: map.get(color.$layout-surf, 'raised');

      .text {
        @include typo.typography('b3s', $color: map.get(color.$text-colors, 'secondary'));
      }

      .icon {
        color: map.get(color.$icon-neutral, 'primary');
      }

      .remove {
        color: map.get(color.$icon-neutral, 'primary');
      }

      @include mx.common-mouse-event {
        @include mx.border('all', $color: map.get(color.$layout-border, 'tertiary'));
        background: map.get(color.$layout-surf, 'raised');
      }
    }

    @if $type == 'filled' {
      background: map.get(color.$layout-surf, 'primary');

      .text {
        @include typo.typography('b3s', $color: map.get(color.$text-colors, 'inverse'));

        &.category,
        &.team {
          padding-right: map.get(var.$unit, 2);
          font-weight: 400;
          color: map.get(color.$text-colors, 'muted');
          white-space: nowrap;
        }

        &.team {
          margin-left: fn.rem(2);
        }
      }

      .icon {
        color: map.get(color.$icon-neutral, 'secondary');
      }

      .remove {
        color: map.get(color.$icon-neutral, 'secondary');
      }

      @include mx.common-mouse-event {
        background: map.get(color.$layout-surf, 'primary');
      }
    }
  }
}

.vits-chip-button {
  @include common-chip-button('outline');
  @include common-chip-button('filled');
}

.vits-product {
  &-flag {
    @include mx.flex(flex, row, flex-start, center);
    @include typo.typography('b5r');
    flex-shrink: 0;
    height: fn.rem(18);
    padding: 0 map.get(var.$unit, 4);
    border-radius: map.get(var.$radius, 'sm');

    // modifier별 토큰 맵
    $mods: (
      today: (
        text: map.get(color.$text-status, 'brand-sub'),
        bg: map.get(color.$layout-status, 'brand-bg-sub'),
        hasicon: true
      ),
      tomorrow: (
        text: map.get(color.$text-status, 'info'),
        bg: map.get(color.$layout-status, 'info-bg-sub'),
        hasicon: false
      ),
      hot: (
        text: map.get(color.$text-status, 'success'),
        bg: map.get(color.$layout-status, 'success-bg-sub'),
        hasicon: false
      ),
      count: (
        text: map.get(color.$text-colors, 'default'),
        bg: map.get(color.$layout-surf, 'mypage'),
        hasicon: false
      )
    );

    @each $name, $opt in $mods {
      &.is-#{$name} {
        color: map.get($opt, text);
        background: map.get($opt, bg);

        // today만 아이콘 스타일 추가
        @if map.get($opt, hasIcon) == true {
          .icon {
            @include icon.ic-size(map.get(var.$unit, 12));
            color: map.get($opt, text);
          }
        }
      }
    }
  }

  &-flags {
    @include mx.flex(flex, row, flex-start, center);
    gap: map.get(var.$unit, 2);
  }

  &-promo {
    @include mx.flex(flex, row, flex-start, center);

    &-badge.is-free-ship {
      @include mx.flex(flex, row, flex-start, center);
      @include typo.typography('b5r');
      height: fn.rem(18);
      padding: 0 map.get(var.$unit, 4);
      color: map.get(color.$text-status, 'info');
      background: map.get(color.$layout-surf, 'mypage');
      border-radius: map.get(var.$radius, 'sm');
    }
  }
}

.vits-chip-file {
  @include mx.flex(inline-flex, row, flex-start, center);
  @include mx.border('all', $color: map.get(color.$layout-border, 'quaternary'));
  max-width: 100%;
  height: map.get(var.$unit, 32);
  padding: 0 map.get(var.$unit, 12);
  overflow: hidden;
  background: map.get(color.$layout-surf, 'raised');
  border-radius: map.get(var.$radius, 'sm');

  .text {
    @include typo.typography('b3r');
    min-width: 0;

    &.name {
      @include mx.ellipsis-single;
    }

    &.ext {
      flex-shrink: 0;
    }
  }

  .icon {
    @include icon.ic-size(map.get(var.$unit, 16));
    flex-shrink: 0;
    margin-left: map.get(var.$unit, 8);
    color: map.get(color.$icon-neutral, 'secondary');
  }
}

// -----------------------------------------------------------------------------
// vits-general-label: 공통 상태/카테고리 레이블 (4가지 색상 타입, 개별 사용 가능 )
// -----------------------------------------------------------------------------
.vits-general-label {
  @include typo.typography('b5r');
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-height: fn.rem(18);
  padding: 0 map.get(var.$unit, 4);
  line-height: 1.4;
  white-space: nowrap;
  border-radius: map.get(var.$radius, 'sm');

  &.is-general-blue {
    color: map.get(color.$text-status, 'info');
    background-color: map.get(color.$layout-status, 'info-bg-sub');
  }

  &.is-general-red {
    color: map.get(color.$text-status, 'brand-sub');
    background-color: map.get(color.$layout-status, 'brand-bg-default');
  }

  &.is-general-green {
    color: map.get(color.$text-status, 'success-sub');
    background-color: map.get(color.$layout-status, 'success-bg-default');
  }

  &.is-general-gray {
    color: map.get(color.$text-colors, 'secondary');
    background-color: map.get(color.$layout-surf, 'sunken');
  }

  &.is-general-sunken {
    color: map.get(color.$text-colors, 'tertiary');
    background-color: map.get(color.$layout-surf, 'sunken');
  }
}
