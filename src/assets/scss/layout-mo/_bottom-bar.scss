// -----------------------------------------------------------------------------
// layout-mo/_bottom-bar.scss
// - 하단 고정 바 내부 스타일 (tab-bar, action-bar 등)
// - ⚠️ 클래스 네이밍: bottom-{타입} (예: bottom-tab-bar, bottom-action-bar)
// - ⚠️ 타입 추가 시 $mo-bottom-bar 맵에 키 추가 → .vm-wrap 여백 자동 반영
// -----------------------------------------------------------------------------

@use 'sass:map';
@use '@/assets/scss/abstracts/variables' as var;
@use '@/assets/scss/abstracts/mixins' as mx;
@use '@/assets/scss/abstracts/functions' as fn;
@use '@/assets/scss/base/colors' as color;
@use '@/assets/scss/base/typography' as typo;
@use '@/assets/scss/components/icon' as icon;

.vm-bottom-bar {
  // 바텀바 타입별 최소 높이 자동 생성 ($mo-bottom-bar 맵 기준)
  @each $type, $height in var.$mo-bottom-bar {
    .bottom-#{$type} {
      min-height: calc(#{$height} + var(--safe-bottom));
    }
  }

  // tab-bar
  .bottom-tab-bar {
    @include mx.border('top', $color: map.get(color.$neutral-colors, '9'));
    padding: map.get(var.$unit, 8);
    background: color.$color-white;
    box-shadow: map.get(var.$box-shadow, 'mo_menu');

    .tab-bar {
      &-nav {
        @include mx.flex(flex, row, center, center);
        width: 100%;
      }

      &-items {
        @include mx.flex(flex, row, center, center);
        gap: map.get(var.$unit, 16);

        @media (width >= 744px) {
          justify-content: space-between;
          width: 100%;
          padding: 0 map.get(var.$unit, 16);
        }
      }

      &-item {
        flex: 0 0 fn.rem(54);

        $tab-icons: category, search, home, recently, mypage;

        .link {
          @include mx.flex(flex, column, center, center);
          gap: map.get(var.$unit, 4);
          width: 100%;

          .icon {
            width: map.get(var.$unit, 32);
            height: map.get(var.$unit, 32);
            color: map.get(color.$icon-neutral, 'secondary');
            background-color: currentcolor;
            mask: no-repeat center / contain;

            @media (width >= 744px) {
              width: calc(24 * 1.3);
              height: calc(24 * 1.3);
            }

            @each $name in $tab-icons {
              &.icon-#{$name} {
                mask-image: url('/public/resources/img/mro/renewal/ic/ic-tab-#{$name}.svg');
              }
            }
          }

          .text {
            @include typo.typography('b4r', $color: map.get(color.$gray-shades, '60'));
            white-space: nowrap;

            @media (width >= 744px) {
              font-size: 14px;
            }
          }
        }

        &.is-active .link {
          .icon {
            @each $name in $tab-icons {
              &.icon-#{$name} {
                mask-image: url('/public/resources/img/mro/renewal/ic/ic-tab-#{$name}-bold.svg');
              }
            }

            &:not(.icon-home) {
              &,
              & + .text {
                color: map.get(color.$gray-shades, '100');
              }
            }

            &.icon-home {
              &,
              & + .text {
                color: map.get(color.$icon-colors, 'primary');
              }
            }
          }

          /* stylelint-disable-next-line no-descending-specificity */
          .text {
            font-weight: 600;
          }
        }
      }
    }
  }

  // step-bar == .bottom-step-bar
  [class*='bottom-step-bar'] {
    @include mx.flex(flex, column);
    gap: map.get(var.$unit, 32);
    padding: var.$mo-section-gap var.$mo-gutter 0;
    background: color.$color-white;
    border-radius: map.get(var.$radius, 'lg');
    box-shadow: map.get(var.$box-shadow, 'mo_menu');

    [class*='vits-btn-'] {
      width: 100%;
    }

    .step-bar-price {
      &-inner {
        @include mx.flex(flex, row, space-between, center);
        width: 100%;
      }

      .label {
        @include typo.typography('b2s');
      }

      .value {
        @include typo.typography('h3b', $color: map.get(color.$text-status, 'brand'));
      }
    }

    &.is-price {
      min-height: map.get(var.$mo-bottom-bar, 'step-bar-price');

      .step-bar-price {
        display: flex;
      }
    }
  }
}
