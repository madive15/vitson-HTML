// -----------------------------------------------------------------------------
// pages/_mypage-pay.scss
// - 마이페이지 결제 페이지 전용 스타일
// -----------------------------------------------------------------------------
@use 'sass:map';
@use '@/assets/scss/abstracts/variables' as var;
@use '@/assets/scss/abstracts/mixins' as mx;
@use '@/assets/scss/abstracts/functions' as fn;
@use '@/assets/scss/base/colors' as color;
@use '@/assets/scss/base/typography' as typo;
@use '@/assets/scss/components/icon' as icon;
@use '@/assets/scss/components/button' as button;
@use '@/assets/scss/components/form' as form;

/* -----------------------------------
 * 비츠온페이 관리 (my-paymanage)
 * ----------------------------------- */
.pay-headline {
  @include mx.flex($align: center, $justify: space-between);
  width: 100%;

  .vits-mypage-content-title {
    @include typo.typography('h2b', $color: map.get(color.$text-colors, 'primary'));
    margin: 0;
  }

  &-link {
    @include mx.flex($align: center);
    @include typo.typography('b3r', $color: map.get(color.$text-colors, 'secondary'));
    gap: fn.rem(8);
    padding: fn.rem(6) fn.rem(12);
    /* stylelint-disable-next-line at-rule-empty-line-before */
  }
}

.pay-tabs {
  &.vits-tabs-lg {
    background-color: map.get(color.$layout-surf, 'base');
    border-radius: map.get(var.$radius, 'lg');
  }

  .pay-tab-btn {
    &:not(.is-active) .text {
      @include typo.typography('b2r', $color: map.get(color.$text-colors, 'tertiary'));
    }

    &.is-active {
      border-bottom: 2px solid map.get(color.$layout-border, 'brand');
    }
  }
}

.pay-reg-btn {
  width: 100%;
  margin-bottom: map.get(var.$unit, 36);
}

.pay-card-list {
  @include mx.flex;
  flex-wrap: wrap;
  gap: map.get(var.$unit, 12);
}

.pay-card-item {
  @include mx.flex($align: center);
  @include mx.border(all, 1px, solid, map.get(color.$layout-border, 'quaternary'));
  position: relative;
  gap: map.get(var.$unit, 16);
  width: calc(50% - #{fn.rem(6)});
  min-width: fn.rem(280);
  padding: map.get(var.$unit, 20) map.get(var.$unit, 16);
  background-color: map.get(color.$layout-surf, 'raised');
  border-radius: map.get(var.$radius, 'lg');
  transition: border-color 0.3s ease;

  @include mx.common-mouse-event {
    background-color: map.get(color.$layout-surf, 'base');
    border-color: map.get(color.$layout-border, 'primary');
  }

  &-icon {
    @include mx.flex($align: center, $justify: center);
    flex-shrink: 0;
    width: fn.rem(48);
    height: fn.rem(48);
    color: map.get(color.$icon-neutral, 'inverse');
    background-color: map.get(color.$layout-status, 'info-bg-default');
    border-radius: 50%;

    /* stylelint-disable-next-line at-rule-empty-line-before */
    .ic {
      width: fn.rem(24);
      height: fn.rem(24);
    }
  }

  &-body {
    @include mx.flex($direction: column);
    flex: 1;
    gap: fn.rem(4);
    min-width: 0;
  }

  &-name {
    @include typo.typography('b2s', $color: map.get(color.$text-colors, 'primary'));
    @include mx.ellipsis-multi(1.5, 1);
    margin: 0;
  }

  &-badge {
    display: inline-block;
    align-self: flex-start;
    min-width: fn.rem(26);
    padding: fn.rem(3) fn.rem(4);
    margin-left: fn.rem(8);
    vertical-align: middle;
    background-color: map.get(color.$info-colors, 'primary-surface');
    border-radius: map.get(var.$radius, 'sm');

    @include typo.typography('b5r', $color: map.get(color.$text-status, 'info'));
  }

  &-num {
    @include typo.typography('b4r', $color: map.get(color.$text-colors, 'secondary'));
    margin: 0;
  }

  &-option-wrap {
    position: relative;
    flex-shrink: 0;
  }

  &-option {
    @include button.btn-reset;
    @include mx.flex($align: center, $justify: center);
    flex-shrink: 0;
    width: fn.rem(32);
    height: fn.rem(32);
    color: map.get(color.$icon-neutral, 'secondary');

    .ic {
      width: fn.rem(32);
      height: fn.rem(32);
    }

    /* stylelint-disable-next-line at-rule-empty-line-before */
    @include mx.common-mouse-event {
      color: map.get(color.$icon-neutral, 'primary');
    }
  }

  /* 계좌 목록 유형: 연한 녹색 원형 + 은행 아이콘 */
  &.type-account {
    .pay-card-item-icon {
      color: map.get(color.$text-colors, 'inverse');
      background-color: map.get(color.$layout-status, 'success-bg-default');
    }
  }
}

/* pay-card-item-option 클릭 시 노출되는 토글 메뉴 (data-toggle-btn) */
.pay-card-menu {
  position: absolute;
  top: 100%;
  right: 0;
  z-index: var.$zindex-tooltip;
  padding: fn.rem(12) 0;
  overflow: hidden;
  text-align: left;
  background-color: color.$color-white;
  border: 1px solid map.get(color.$layout-border, '');
  border-radius: map.get(var.$radius, 'lg');
  box-shadow: map.get(var.$box-shadow, 'elevation_1');

  &[data-toggle-box].is-open {
    overflow: hidden;
  }

  &-title {
    @include typo.typography('b4s', $color: map.get(color.$text-colors, 'muted'));
    padding: 0;
    margin: 0;
    text-align: center;
    white-space: nowrap;
  }

  &-list {
    padding: 0;
    margin: 0;
    list-style: none;
  }

  &-btn {
    @include mx.flex($align: center);
    @include typo.typography('b4s', $color: map.get(color.$text-colors, 'tertiary'));
    gap: fn.rem(4);
    width: calc(100% - map.get(var.$unit, 24));
    padding: fn.rem(12) 0 0;
    margin: 0 fn.rem(12);
    white-space: nowrap;
    background-color: map.get(color.$layout-surf, 'base');
    border: 0;

    @include mx.common-mouse-event {
      .text,
      .ic {
        @include typo.typography('b4s', $color: map.get(color.$text-colors, 'secondary'));
      }
    }

    .ic {
      width: fn.rem(18);
      height: fn.rem(18);
      color: map.get(color.$icon-neutral, 'secondary');
    }
    /* stylelint-disable-next-line at-rule-empty-line-before */

    &.is-delete {
      margin-top: fn.rem(12);
      border-top: 1px solid map.get(color.$layout-surf, 'sunken');

      @include mx.common-mouse-event {
        color: map.get(color.$text-colors, 'primary');

        .ic,
        .text {
          @include typo.typography('b4b', $color: map.get(color.$text-status, 'brand-sub'));
        }
      }
    }
  }
}

.main-content-paymanage {
  @include mx.flex($direction: column);
  gap: map.get(var.$unit, 24);

  .pay-tabs,
  .pay-reg-btn {
    box-shadow: map.get(var.$box-shadow, 'elevation_1');
  }

  .vits-mypage-panel {
    flex: 1;
    gap: 24px;

    &-inner {
      @include mx.flex($direction: column);
      flex: 1;
      gap: map.get(var.$unit, 36);
      width: 100%;
      padding: map.get(var.$unit, 56);
      background-color: map.get(color.$layout-surf, 'base');
      border-radius: map.get(var.$radius, 'lg');
      box-shadow: map.get(var.$box-shadow, 'elevation_1');
    }

    .pay-panel-empty {
      @include mx.flex($align: center, $justify: center);
      min-height: fn.rem(400);

      .vits-empty-state-icon {
        @include mx.flex($align: center, $justify: center);
        background-color: map.get(color.$layout-surf, 'raised');

        .ic {
          width: fn.rem(32);
          height: fn.rem(32);
          color: map.get(color.$icon-neutral, 'tertiary');
        }
      }
    }

    .pay-panel-has-items {
      min-height: fn.rem(400);
    }
  }
}

/* -----------------------------------
 * 배송지 관리 (my-shipping)
 * ----------------------------------- */
.shipping-headline {
  @include mx.flex($align: flex-end);

  .vits-mypage-content-title {
    @include typo.typography('h2b', $color: map.get(color.$text-colors, 'primary'));
    margin: 0;
  }

  .vits-mypage-content-desc {
    @include typo.typography('b3r', $color: map.get(color.$text-colors, 'secondary'));
  }
}

.vits-mypage-shipping-toolbar {
  @include mx.flex($align: center, $justify: space-between);
  width: 100%;

  .shipping-toolbar {
    &-left {
      @include mx.flex($align: center);
      gap: map.get(var.$unit, 12);
    }

    &-count {
      @include typo.typography('b3r', $color: map.get(color.$text-colors, 'secondary'));
      margin: 0;

      b {
        padding: 0 fn.rem(2) 0 fn.rem(4);
        font-weight: 700;
      }
    }

    &-size {
      min-width: fn.rem(120);
    }

    &-actions {
      @include mx.flex($align: center);
      gap: map.get(var.$unit, 12);
    }
  }
}

.shipping-panel {
  @include mx.flex($direction: column, $justify: space-between);
  flex: 1;
  gap: map.get(var.$unit, 20);
  width: 100%;
  padding: map.get(var.$unit, 32);
  background-color: map.get(color.$layout-surf, 'base');
  border-radius: map.get(var.$radius, 'lg');
  box-shadow: map.get(var.$box-shadow, 'elevation_1');

  &.shipping-empty {
    justify-content: center;

    /* stylelint-disable-next-line no-descending-specificity */
    .vits-empty-state-icon {
      @include mx.flex($align: center, $justify: center);
      background-color: map.get(color.$layout-surf, 'raised');

      /* stylelint-disable-next-line no-descending-specificity */
      .ic {
        width: fn.rem(32);
        height: fn.rem(32);
        color: map.get(color.$icon-neutral, 'tertiary');
      }
    }
  }
}

.shipping-table-wrap {
  @include mx.border(all, 1px, solid, map.get(color.$layout-border, 'quaternary'));
  flex: 1;
  overflow: hidden;
  border-radius: map.get(var.$radius, 'md');
}

.shipping-table {
  width: 100%;
  border-collapse: collapse;

  thead {
    background-color: map.get(color.$layout-surf, 'sunken');
  }

  th {
    @include typo.typography('b3r', $color: map.get(color.$text-colors, 'tertiary'));
    padding: fn.rem(21) fn.rem(12);
    text-align: center;
    vertical-align: middle;
    border-bottom: 1px solid map.get(color.$layout-border, 'quaternary');
  }

  td {
    @include typo.typography('b3r', $color: map.get(color.$text-colors, 'default'));
    text-align: center;
    border-top: 1px solid map.get(color.$layout-border, 'quinary');
  }

  tr:last-child td {
    border-bottom: 1px solid map.get(color.$layout-border, 'quinary');
  }

  tr:first-child td {
    border-top: 0;
  }

  &-badge {
    display: inline-block;
    min-width: fn.rem(44);
    padding: fn.rem(3) fn.rem(6);
    background-color: map.get(color.$layout-status, 'brand-bg-default');
    border-radius: map.get(var.$radius, 'sm');

    /* stylelint-disable-next-line at-rule-empty-line-before */
    @include typo.typography('b5r', $color: map.get(color.$text-status, 'brand-sub'));
  }

  &-classify,
  &-name,
  &-recipient,
  &-contact,
  &-cargo,
  &-office {
    display: block;
    padding: fn.rem(21) fn.rem(0);
    word-break: keep-all;
  }

  &-addr {
    display: block;
    text-align: center;
    word-break: break-word;
    white-space: pre-line;
  }

  &-empty {
    color: map.get(color.$text-colors, 'tertiary');
  }

  &-actions {
    @include mx.flex($align: center, $justify: center);
    gap: fn.rem(4);
  }

  &-edit,
  &-delete {
    @include button.btn-reset;
    @include mx.flex($align: center, $justify: center);
    width: fn.rem(32);
    height: fn.rem(32);
    color: map.get(color.$icon-neutral, 'secondary');

    /* stylelint-disable-next-line no-descending-specificity */
    .ic {
      width: fn.rem(20);
      height: fn.rem(20);
    }

    @include mx.common-mouse-event {
      color: map.get(color.$icon-neutral, 'primary');
    }
  }
}

.shipping-pagination {
  @include mx.flex($align: center, $justify: center);
  padding-top: map.get(var.$unit, 8);
}

.main-content-shipping {
  @include mx.flex($direction: column);
  gap: map.get(var.$unit, 24);
}
