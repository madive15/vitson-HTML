// -----------------------------------------------------------------------------
// pages/_contract.scss
// - 전자서명 계약서, 동의서 전용 스타일
// -----------------------------------------------------------------------------

@use 'sass:map';
@use '@/assets/scss/abstracts/variables' as var;
@use '@/assets/scss/abstracts/mixins' as mx;
@use '@/assets/scss/abstracts/functions' as fn;
@use '@/assets/scss/base/colors' as color;
@use '@/assets/scss/base/typography' as typo;

/* -----------------------------------------------------------------------------
  vits-credit-contract (거래약정서 섹션)
----------------------------------------------------------------------------- */
.window-frame,
.window-frame body {
  width: 100%;
  min-width: auto;
}

.vits-credit-contract {
  @include typo.typography('b2r', $color: map.get(color.$text-colors, 'primary'));
  padding: map.get(var.$unit, 32) map.get(var.$unit, 48);

  p {
    margin: 0 0 map.get(var.$unit, 8);
  }

  p:last-child {
    margin-bottom: 0;
  }
}

.contract-articles {
  margin-bottom: map.get(var.$unit, 24);
}

.contract-article {
  margin-bottom: map.get(var.$unit, 24);

  &:last-child {
    margin-bottom: 0;
  }

  &-head {
    @include typo.typography('b3s', $color: map.get(color.$text-colors, 'primary'));
    margin: 0 0 map.get(var.$unit, 8);
    font-weight: 600;
  }

  &-body {
    @include typo.typography('b4r', $color: map.get(color.$text-colors, 'tertiary'));
    padding-left: 0;
    margin: 0;

    /* stylelint-disable-next-line no-descending-specificity */
    p {
      margin-bottom: map.get(var.$unit, 8);
      word-break: keep-all;
    }

    .contract-date-row {
      @include mx.flex($align: center, $wrap: wrap);
      gap: fn.rem(8);
      margin-bottom: map.get(var.$unit, 2);

      .signed-date {
        @include typo.typography('b4s', $color: map.get(color.$text-colors, 'primary'));
      }
    }
  }
}

.contract-input {
  @include typo.typography('b4r', $color: map.get(color.$text-colors, 'primary'));
  display: inline-block;
  min-width: fn.rem(50);
  padding: fn.rem(4) fn.rem(8);
  background-color: map.get(color.$layout-surf, 'base');
  border: 1px solid map.get(color.$layout-border, 'tertiary');
  border-radius: map.get(var.$radius, 'sm');

  &::placeholder {
    color: map.get(color.$text-colors, 'quaternary');
  }

  &.contract-input-year,
  &.contract-input-month,
  &.contract-input-day {
    width: fn.rem(50);
    text-align: center;
  }

  &.contract-input-full {
    width: 100%;
    min-width: 0;
  }
}

.contract-box {
  margin-bottom: map.get(var.$unit, 20);
  border: 1px solid map.get(color.$layout-border, 'tertiary');
  border-radius: map.get(var.$radius, 'md');

  &:last-child {
    margin-bottom: 0;
  }

  &-title {
    @include typo.typography('b2s', $color: map.get(color.$text-colors, 'primary'));
    padding: map.get(var.$unit, 16) map.get(var.$unit, 32);
    border-bottom: 1px solid map.get(color.$layout-border, 'quinary');
  }

  &-desc {
    @include typo.typography('b4r', $color: map.get(color.$text-colors, 'tertiary'));
    display: block;
    padding: map.get(var.$unit, 4) 0;
  }

  .contract-info-cols,
  .contract-info-list {
    display: grid;
    padding: map.get(var.$unit, 20) map.get(var.$unit, 32);
  }

  .contract-info-cols {
    grid-template-columns: 1fr 1fr;
    gap: map.get(var.$unit, 16) map.get(var.$unit, 40);
  }

  .contract-info-list {
    gap: map.get(var.$unit, 8);
  }

  .contract-info-col {
    display: flex;
    flex-direction: column;
    gap: map.get(var.$unit, 16);
    margin: 0;
  }

  .contract-info-row-full {
    grid-column: 1 / -1;
  }

  .contract-info-row {
    display: grid;
    grid-template-rows: auto auto;
    grid-template-columns: 1fr;
    gap: map.get(var.$unit, 4) 0;
    align-items: start;

    dt {
      @include typo.typography('b3r', $color: map.get(color.$text-colors, 'tertiary'));
    }

    dd {
      @include typo.typography('b3r', $color: map.get(color.$text-colors, 'primary'));
      @include mx.flex($align: center, $justify: space-between);
      gap: map.get(var.$unit, 8);
      min-height: fn.rem(40);

      .contract-input {
        width: 100%;
        min-height: fn.rem(32);
      }
    }
  }

  .contract-info-value {
    margin-right: map.get(var.$unit, 8);
  }

  .contract-sign-area {
    @include typo.typography('b3r', $color: map.get(color.$text-colors, 'tertiary'));
    display: inline-block;
    min-width: fn.rem(46);
    min-height: fn.rem(24);
    padding: fn.rem(2) 0;
    white-space: nowrap;
    vertical-align: middle;
    cursor: pointer;
  }

  .contract-info-row-full:has(.contract-sign-area) dd {
    width: calc(50% - #{fn.rem(20)});
  }
}

/* -----------------------------------------------------------------------------
  vits-credit-consent (개인신용 정보 수집·조회·이용 및 제공 동의서)
----------------------------------------------------------------------------- */
.vits-credit-consent {
  @include typo.typography('b2r', $color: map.get(color.$text-colors, 'primary'));
  padding: map.get(var.$unit, 32) map.get(var.$unit, 48);

  .contract-box {
    margin-bottom: map.get(var.$unit, 20);

    &:last-of-type {
      margin-bottom: map.get(var.$unit, 24);
    }
  }

  .contract-article-body p {
    position: relative;
    padding-left: map.get(var.$unit, 8);

    &::before {
      @include mx.position(absolute, $top: 0, $left: 0);
      width: fn.rem(2);
      height: fn.rem(2);
      color: map.get(color.$text-colors, 'tertiary');
      content: '·';
    }
  }

  .contract-date-row {
    @include mx.flex($align: center, $wrap: wrap, $justify: center);
    @include typo.typography('b3r', $color: map.get(color.$text-colors, 'primary'));
    gap: fn.rem(8);
    margin: 0 auto;

    .signed-date {
      @include typo.typography('b3s');
    }
  }
}

.consent-intro {
  @include typo.typography('b3r', $color: map.get(color.$text-colors, 'tertiary'));
  margin: 0 0 map.get(var.$unit, 20);
}

.consent-required {
  margin-bottom: map.get(var.$unit, 24);

  .general-table-wrap {
    min-height: fit-content;
  }
}

.consent-required-question {
  @include typo.typography('b3r', $color: map.get(color.$text-colors, 'primary'));
  margin: 0 0 map.get(var.$unit, 12);
}

.consent-required-badge {
  font-weight: 600;
}

/* -----------------------------------------------------------------------------
  common (공통 영역)
----------------------------------------------------------------------------- */
.contract-main-title {
  @include typo.typography('h3b', $color: map.get(color.$text-colors, 'primary'));
  padding-bottom: map.get(var.$unit, 40);
  text-align: center;
}

.contract-signature-submit {
  @include mx.flex(flex, row, space-between, center);
  gap: fn.rem(12);
  width: 100%;
  margin-top: fn.rem(44);

  [class^='vits-btn-'] {
    &:first-child {
      min-width: fn.rem(150);
    }

    &:last-child {
      flex: 1;
    }
  }
}

/* -----------------------------------------------------------------------------
  vits-guide-popup (가이드/도움말 팝업)
----------------------------------------------------------------------------- */
.vits-guide-popup {
  @include mx.img-fit;

  .vits-alerts-anatomy {
    margin-bottom: map.get(var.$unit, 32);
  }
}
