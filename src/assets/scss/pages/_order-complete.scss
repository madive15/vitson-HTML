// -----------------------------------------------------------------------------
// pages/order-complete.scss
// - 주문완료 페이지에서 사용.
// -----------------------------------------------------------------------------
@use 'sass:map';
@use '@/assets/scss/abstracts/variables' as var;
@use '@/assets/scss/abstracts/mixins' as mx;
@use '@/assets/scss/abstracts/functions' as fn;
@use '@/assets/scss/base/colors' as color;
@use '@/assets/scss/base/typography' as typo;
@use '@/assets/scss/components/icon' as icon;
@use '@/assets/scss/components/button' as button;
@use '@/assets/scss/components/form' as form;

// -----------------------------------------------------------------------------
// 비츠온페이 비밀번호 인증 팝업 (윈도우 팝업 전용, .ic 특이도 순서용으로 상단 배치)
// -----------------------------------------------------------------------------
.vitsonpay {
  &-popup {
    @include mx.flex($direction: column);
    max-width: fn.rem(480);
    min-height: 100vh;
    margin: 0 auto;
    background-color: map.get(color.$layout-surf, 'base');
    border: 1px solid map.get(color.$layout-border, 'quinary');
  }

  &-header {
    @include mx.flex($align: center, $justify: space-between);
    flex-shrink: 0;
    padding: map.get(var.$unit, 16) map.get(var.$unit, 20);
    border-bottom: 1px solid map.get(color.$layout-border, 'quinary');
  }

  &-back,
  &-close {
    display: flex;
    align-items: center;
    justify-content: center;
    width: fn.rem(40);
    height: fn.rem(40);
    padding: 0;
    color: map.get(color.$text-colors, 'primary');
    cursor: pointer;
    background: none;
    border: none;

    .ic {
      width: fn.rem(24);
      height: fn.rem(24);
    }
  }

  &-logo {
    margin: 0;
    font-size: fn.rem(18);

    @include typo.typography('h4b', $color: map.get(color.$text-colors, 'primary'));
  }

  &-logo-brand {
    color: map.get(color.$text-status, 'brand');
  }

  &-body {
    @include mx.flex($direction: column, $align: center);
    flex: 1;
    padding: map.get(var.$unit, 32) map.get(var.$unit, 24);
  }

  &-title {
    margin: 0 0 map.get(var.$unit, 8);

    @include typo.typography('h3', $color: map.get(color.$text-colors, 'primary'));
  }

  &-desc {
    margin: 0 0 map.get(var.$unit, 24);

    @include typo.typography('b3r', $color: map.get(color.$text-colors, 'tertiary'));
  }

  &-pindots {
    @include mx.flex($align: center, $justify: center);
    gap: map.get(var.$unit, 12);
    margin-bottom: map.get(var.$unit, 16);
  }

  &-dot {
    width: fn.rem(12);
    height: fn.rem(12);
    background-color: map.get(color.$layout-border, 'quaternary');
    border-radius: 50%;
    transition: background-color 0.2s;

    &.is-filled {
      background-color: map.get(color.$text-colors, 'primary');
    }
  }

  &-body .vits-text-link {
    color: map.get(color.$text-status, 'info');
    text-decoration: underline;
  }

  &-keypad {
    flex-shrink: 0;
    padding: map.get(var.$unit, 20);
    background-color: map.get(color.$layout-surf, 'sunken');
    border-top: 1px solid map.get(color.$layout-border, 'quinary');
  }

  &-keygrid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: map.get(var.$unit, 8);
    margin-bottom: map.get(var.$unit, 12);
  }

  &-key {
    @include typo.typography('h4', $color: map.get(color.$text-colors, 'primary'));
    @include mx.flex($align: center, $justify: center);
    height: fn.rem(56);
    cursor: pointer;
    background: none;
    border: 0;
  }

  &-key-empty {
    pointer-events: none;
  }

  &-keyactions {
    @include mx.flex($align: center, $justify: space-between);
    gap: map.get(var.$unit, 12);
  }

  &-del {
    display: flex;
    align-items: center;
    justify-content: center;
    width: fn.rem(56);
    height: fn.rem(48);
    padding: 0;
    color: map.get(color.$text-colors, 'secondary');
    cursor: pointer;
    background: none;
    border: none;

    .ic {
      width: fn.rem(24);
      height: fn.rem(24);
    }
  }

  &-clear {
    padding: map.get(var.$unit, 8) map.get(var.$unit, 12);
    cursor: pointer;
    background: none;
    border: none;

    @include typo.typography('b3r', $color: map.get(color.$text-colors, 'tertiary'));
  }
}

// -----------------------------------------------------------------------------
// 주문완료 페이지
// -----------------------------------------------------------------------------
.vits-main-order-complete {
  padding: map.get(var.$unit, 40) 0 fn.rem(50);
  background-color: map.get(color.$layout-surf, 'mypage');

  // 주문 완료 (낮은 특이도 — no-descending-specificity)
  .order-complete {
    &-status {
      @include mx.flex($direction: column, $align: center);
      gap: map.get(var.$unit, 8);
      margin: map.get(var.$unit, 40) 0 map.get(var.$unit, 20);
      text-align: center;
    }

    &-number {
      @include typo.typography('b2s', $color: map.get(color.$text-status, 'brand-sub'));

      strong {
        font-weight: map.get(typo.$typo-weight, 's');
      }
    }

    &-notice {
      display: none;

      @include typo.typography('b3r', $color: map.get(color.$text-colors, 'tertiary'));
    }
  }

  .order-section {
    @include mx.flex($direction: column);
    border-radius: map.get(var.$radius, 'lg');

    @include mx.border(all, 1px, solid, map.get(color.$layout-border, 'quaternary'));

    &-wrap {
      @include mx.flex($direction: column);
      gap: map.get(var.$unit, 32);
      padding: 0 map.get(var.$unit, 32) fn.rem(64);
    }

    &-group {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: map.get(var.$unit, 24);
    }

    &-title {
      @include mx.flex($align: center);
      padding: fn.rem(17) fn.rem(32);
      border-bottom: 1px solid map.get(color.$layout-border, 'quinary');

      @include typo.typography('h3', $color: map.get(color.$text-colors, 'secondary'));

      .icon,
      .ic {
        width: fn.rem(28);
        height: fn.rem(28);
      }
    }

    &-content {
      padding: map.get(var.$unit, 32);
    }

    &.order-payment {
      .order-section-content {
        padding: 0;
      }
    }

    // 주문 상품: 택배 불가 경고 + 상품 목록
    &.order-product .order-product-notice-column {
      @include mx.flex($direction: column);
      gap: map.get(var.$unit, 20);
    }
  }

  // 택배 불가 + 상품 목록 래퍼
  .order-product-parcel-wrap {
    @include mx.flex($align: stretch);
    gap: map.get(var.$unit, 20);
    padding: map.get(var.$unit, 16);
    margin-left: fn.rem(100);
    background-color: map.get(color.$layout-surf, 'mypage');
    border-radius: map.get(var.$radius, 'md');
  }

  // 택배 불가 경고 박스
  .parcel-notice {
    @include mx.flex($direction: column);
    flex: 1;
    gap: map.get(var.$unit, 8);
    padding: map.get(var.$unit, 16);

    &-header {
      @include mx.flex($align: center);
      gap: map.get(var.$unit, 8);
    }

    &-icon {
      @include mx.flex($align: center, $justify: center);
      flex-shrink: 0;
      width: fn.rem(24);
      height: fn.rem(24);
      color: map.get(color.$text-status, 'brand');

      .ic {
        width: fn.rem(24);
        height: fn.rem(24);
      }
    }

    &-title {
      @include typo.typography('b3s', $color: map.get(color.$text-status, 'brand'));
    }

    &-desc {
      @include typo.typography('b4r', $color: map.get(color.$text-colors, 'secondary'));
      padding-left: fn.rem(32);
      margin: 0;

      strong {
        position: relative;
        font-weight: map.get(typo.$typo-weight, 's');

        &::before {
          @include mx.position(absolute, $top: 8px, $left: -9px);
          width: fn.rem(2);
          height: fn.rem(2);
          content: '';
          background-color: map.get(color.$layout-border, 'secondary');
          border-radius: 50%;
        }
      }
    }
  }

  // 주문 상품 목록 박스
  .order-product-list {
    @include mx.flex($direction: column);
    flex: 1;
    gap: map.get(var.$unit, 4);
    min-width: 0;
    padding: map.get(var.$unit, 16);
  }

  .order-product-item {
    @include mx.flex($align: center);
    gap: fn.rem(10);
    padding: map.get(var.$unit, 4) fn.rem(6);
    background-color: map.get(color.$layout-surf, 'base');
    border-radius: map.get(var.$radius, 'sm');

    &-thumb {
      width: fn.rem(24);
      height: fn.rem(24);
      background: map.get(color.$gray-shades, '30');

      img {
        @include mx.common-list-thumb;
      }
    }

    &-name {
      @include typo.typography('b4r', $color: map.get(color.$text-colors, 'default'));
      flex: 1;
      min-width: 0;
    }
  }

  // 페이지 타이틀
  .order-page {
    &-title {
      padding: fn.rem(17) fn.rem(32);
      border-bottom: 1px solid map.get(color.$layout-border, 'quinary');

      h1 {
        @include typo.typography('h3', $color: map.get(color.$text-colors, 'secondary'));
      }
    }
  }

  // 메인 컨테이너 (order-slip 등 높은 특이도 오버레이)
  .vits-order-complete {
    @include mx.flex($direction: column);
    gap: map.get(var.$unit, 32);
    max-width: fn.rem(1280);
    margin: 0 auto;
    background-color: map.get(color.$layout-surf, 'base');
    border-radius: map.get(var.$radius, 'lg');
    box-shadow: 0 4px 7px 0 rgb(0 0 0 / 4%);

    // 주문 실패 화면: 기본 숨김
    .order-section.order-slip {
      display: none;
    }

    // type: slip — 주문 실패 화면 표시
    &.order-slip {
      .order-complete-number,
      .order-section {
        display: none;

        &.order-slip {
          display: block;
        }
      }

      .order-complete-notice {
        display: block;
      }
    }

    &-buttons {
      @include mx.flex($justify: center);
      gap: map.get(var.$unit, 12);
      padding-top: map.get(var.$unit, 24);

      .btn-home {
        width: fn.rem(156);
      }

      .btn-cart {
        width: fn.rem(334);
      }
    }
  }

  // 정보 리스트 (배송 / 결제수단 등)
  .info {
    &-list {
      @include mx.flex($direction: column);
      gap: map.get(var.$unit, 16);
    }

    &-item {
      @include mx.flex($align: center);
      gap: map.get(var.$unit, 8);

      .info-label {
        flex: 0 0 fn.rem(92);
        white-space: normal;

        @include typo.typography('b3', $color: map.get(color.$text-colors, 'tertiary'));
      }

      .info-value {
        @include typo.typography('b3', $color: map.get(color.$text-colors, 'primary'));

        &-status {
          @include typo.typography('b3r', $color: map.get(color.$text-status, 'info'));
        }

        .miss {
          @include typo.typography('b3b', $color: map.get(color.$text-status, 'brand'));
        }
      }

      span:nth-of-type(3) {
        position: relative;
        flex: none;
        padding-left: fn.rem(16);

        &::before {
          position: absolute;
          top: 1px;
          left: 0;
          width: 1px;
          height: 80%;
          content: '';
          background-color: map.get(color.$layout-border, 'quinary');
        }
      }
    }
  }

  // 가격 영역
  .price {
    &-list {
      @include mx.flex($direction: column);
      gap: fn.rem(16);
      padding: 0 map.get(var.$unit, 32) map.get(var.$unit, 32);
    }

    &-item {
      @include mx.flex($align: center, $justify: space-between);
      gap: map.get(var.$unit, 16);

      .price-label {
        @include typo.typography('b3r', $color: map.get(color.$text-colors, 'default'));
      }

      .price-value {
        @include typo.typography('h4b', $color: map.get(color.$text-colors, 'primary'));
      }

      &.is-discount .price-value {
        @include typo.typography('h4b', $color: map.get(color.$text-status, 'brand-sub'));
      }
    }

    &-total {
      @include mx.flex($align: center, $justify: space-between);
      gap: map.get(var.$unit, 16);
      padding: map.get(var.$unit, 20) map.get(var.$unit, 32);
      border-top: 1px solid map.get(color.$layout-border, 'quinary');

      &-label {
        @include typo.typography('b3s', $color: map.get(color.$text-colors, 'tertiary'));
      }

      &-value {
        @include typo.typography('h3b', $color: map.get(color.$text-status, 'brand'));
      }
    }
  }
}
