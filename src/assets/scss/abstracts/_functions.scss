// -----------------------------------------------------------------------------
// abstracts/_functions.scss
// - 전역에서 사용하는 Sass 함수 모음
// -----------------------------------------------------------------------------

@use 'sass:map';
@use 'sass:math';
@use 'sass:meta';
@use 'sass:list';
@use '@/assets/scss/base/colors' as color;

/* ---------------------------------------------------------------------------
 * strip-unit($num)
 * - 숫자 값에서 단위를 제거
 * - rem, dim 등 여러 함수에서 재사용
 * - 단, 단위 없는 값은 그대로 반환
 * ------------------------------------------------------------------------- */
@function strip-unit($num) {
  @if meta.type-of($num) == 'number' and not math.is-unitless($num) {
    @return math.div($num, ($num * 0 + 1));
  }

  @return $num;
}

/* ---------------------------------------------------------------------------
 * rem($px, $root:16)
 * - px 단위를 rem으로 변환
 * - 기본 root 값: 16px
 * - strip-unit을 사용하여 단위 제거 후 계산
 * 사용 예: rem(32) → 2rem
 * ------------------------------------------------------------------------- */
@function rem($px, $root: 16) {
  @if $root == 0 {
    @error "rem(): $root cannot be 0.";
  }

  $n: strip-unit($px);
  $r: strip-unit($root);

  @return math.div($n, $r) * 1rem;
}

/* ---------------------------------------------------------------------------
 * dim($level, $base: #000)
 * - 배경/오버레이 등 dim 처리용 alpha 값 생성
 * - $level: 투명도 (0~100)
 * - $base: 색상 (기본: #000)
 * 사용 예:
 *   dim(60)       → rgba(#000, 0.6)
 *   dim(12, #fff) → rgba(#fff, 0.12)
 * ------------------------------------------------------------------------- */
@function dim($level, $base: #000) {
  $k: strip-unit($level);
  $a: math.div($k, 100);

  @if $a < 0 {
    $a: 0;
  }

  @if $a > 1 {
    $a: 1;
  }

  @return rgba($base, $a);
}
