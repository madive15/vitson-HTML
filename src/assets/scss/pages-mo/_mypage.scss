// -----------------------------------------------------------------------------
// pages/_mypage.scss
// - 마이페이지 전용 스타일 모듈 모음
// -----------------------------------------------------------------------------

@use 'sass:map';
@use '@/assets/scss/abstracts/variables' as var;
@use '@/assets/scss/abstracts/mixins' as mx;
@use '@/assets/scss/abstracts/functions' as fn;
@use '@/assets/scss/base/colors' as color;
@use '@/assets/scss/base/typography' as typo;
@use '@/assets/scss/components/icon' as icon;
@use '@/assets/scss/components/button' as button;

@mixin my-home-layout {
  box-shadow: map.get(var.$box-shadow, 'elevation_1');

  [data-mypage-layout='head'] {
    @include mx.flex(flex, row, flex-start, center);
    height: map.get(var.$unit, 52);
    background: color.$color-white;
    box-shadow: inset 0 -1px 0 0 map.get(color.$layout-border, 'quinary');

    .inner {
      @include mx.flex(flex, row, space-between, center);
      gap: map.get(var.$unit, 8);
      width: 100%;
      height: 100%;
    }

    .title {
      @include typo.typography('b3s');
      @include mx.ellipsis-single;
      flex-grow: 1;
      min-width: 0;
    }

    .icon {
      @include icon.ic-size(var.$mo-gutter);
      flex-shrink: 0;
    }

    &:not([data-head-link]) {
      .inner {
        padding: 0 map.get(var.$unit, 20);
      }
    }

    &[data-head-link='type01'] {
      .inner {
        padding: 0 var.$mo-section-gap;
      }

      .icon {
        color: map.get(color.$icon-neutral, 'tertiary');
      }
    }

    &[data-head-link='type02'] {
      .inner {
        padding: 0 var.$mo-gutter;
      }

      .icon {
        color: map.get(color.$icon-neutral, 'secondary');
      }
    }
  }

  [data-mypage-layout='body'] {
    background: color.$color-white;
  }
}

.vm-wrap {
  &.wrap-my-home .vm-content-wrap,
  &.wrap-my-coupon .vm-content-wrap {
    background: map.get(color.$layout-surf, 'mypage');
  }

  &:has(.vm-claim-request.step-1.is-active) {
    background: map.get(color.$layout-surf, 'sunken');
  }

  &:has(.vm-claim-request.step-2.is-active),
  &:has(.vm-claim-request.step-3.is-active) {
    background: color.$color-white;
  }

  &:has(.vm-claim-request.step-3.is-active) {
    .vm-content-wrap {
      padding-bottom: calc(map.get(var.$mo-bottom-bar, 'step-bar-price') + var(--safe-bottom));
      background: color.$color-white;
    }
  }
}

.wrap-my-orders .vm-main {
  background: map.get(color.$layout-surf, 'mypage');

  &:has(.vits-empty-state-content) {
    @include mx.flex(flex, column);

    .main-content-my-orders {
      @include mx.flex(flex, column);

      .vm-mypage-filter {
        flex-shrink: 0;
      }

      .vits-empty-state {
        flex-grow: 1;
        min-width: 0;
        min-height: 0;
      }
    }
  }

  &:has(.vm-claim-request.step-2.is-active),
  &:has(.vm-claim-request.step-3.is-active) {
    background: color.$color-white;
  }
}

.vm-mypage-round-box {
  overflow: hidden;
  background: color.$color-white;
  border-radius: map.get(var.$radius, 'md');
  box-shadow: map.get(var.$box-shadow, 'elevation_1');

  .round {
    &-head {
      height: map.get(var.$unit, 52);

      > button:not(.round-head-action) {
        @include button.btn-reset;
        width: 100%;
        height: 100%;

        &[aria-expanded='false'] {
          .round-head-icon {
            transform: rotate(180deg);
          }
        }
      }

      > a {
        width: 100%;
        height: 100%;
      }

      &:not(:has(> a, > button:not(.round-head-action))),
      > a,
      /* stylelint-disable-next-line no-descending-specificity */
      > button {
        @include mx.flex(flex, row, flex-start, center);
        gap: map.get(var.$unit, 8);
        padding: 0 map.get(var.$unit, 16);
        box-shadow: inset 0 -1px 0 0 map.get(color.$layout-border, 'quinary');
      }

      &-title,
      &-tit {
        @include typo.typography('b3s', $color: map.get(color.$text-colors, 'primary'));
      }

      &-txt {
        @include typo.typography('b4r', $color: map.get(color.$text-colors, 'tertiary'));
        padding-top: map.get(var.$unit, 2);
      }

      /* stylelint-disable-next-line no-descending-specificity */
      &-icon {
        @include icon.ic-size(map.get(var.$unit, 20));
        margin-left: auto;
        color: map.get(color.$icon-neutral, 'primary');
        transition: transform 0.3s;
      }

      // 배송지 수정
      .round-head-action {
        margin-left: auto;
      }

      &.type-toggle-head > button {
        padding: 0 var.$mo-gutter;
      }
    }

    &-body {
      &:not(.type-toggle-body) {
        padding: map.get(var.$unit, 20) var.$mo-gutter;
      }

      &-list {
        @include mx.flex(flex, column);
        gap: map.get(var.$unit, 24);
        width: 100%;
      }

      &-actions {
        @include mx.flex(flex, row, flex-end, center);
        width: 100%;
        padding: 0 var.$mo-gutter map.get(var.$unit, 32);
      }

      .info-list {
        @include mx.flex(flex, row, flex-start, center, wrap);
        gap: map.get(var.$unit, 8);
        width: 100%;

        dt,
        dd {
          @include mx.flex(flex, row, flex-start, center);
          min-height: map.get(var.$unit, 32);
          text-decoration: none;
        }

        dt {
          @include typo.typography('b3r', $color: map.get(color.$text-colors, 'tertiary'));
          flex: 0 0 27.03%;
        }

        dd {
          @include typo.typography('b3r', $color: map.get(color.$text-colors, 'primary'));
          flex: 0 0 calc(100% - 27.03% - 8px);

          // 배송 준비중일 떄 - 수정 관련
          .shipping {
            &-edit {
              &-view {
                @include mx.flex(flex, row, flex-start, center);
                gap: map.get(var.$unit, 8);
                max-width: 100%;

                .vits-text-underline-button {
                  flex-shrink: 0;
                }
              }

              &-form {
                @include mx.flex(flex, column);
                gap: map.get(var.$unit, 8);
                width: 100%;
                margin-top: (map.get(var.$unit, 8) * -1);

                &.type-row {
                  flex-direction: row;
                }
              }

              &-buttons {
                @include mx.flex(flex, row, flex-end, center);
                gap: fn.rem(10);
              }

              &-select {
                flex-grow: 1;

                .vits-select {
                  &,
                  &-trigger {
                    width: 100%;
                    height: 100%;
                  }

                  &-trigger {
                    padding: 0 map.get(var.$unit, 12);
                  }

                  &-value {
                    color: map.get(color.$text-colors, 'primary');
                  }
                }
              }
            }
          }
        }

        &.info-shipping,
        &.type-claim {
          align-items: stretch;

          dt,
          dd {
            padding-top: map.get(var.$unit, 8);
            padding-bottom: map.get(var.$unit, 8);
          }

          dt {
            align-self: flex-start;
          }
        }

        &.info-shipping {
          & + .info-shipping {
            @include mx.border('top', $color: map.get(color.$layout-border, 'quinary'));
            padding-top: map.get(var.$unit, 8);
            margin-top: map.get(var.$unit, 8);
          }
        }

        &.type-claim {
          dt {
            color: map.get(color.$text-colors, 'tertiary') !important;
          }

          dd {
            justify-content: flex-start !important;
            color: map.get(color.$text-colors, 'primary') !important;
            text-align: left !important;

            p + p {
              margin-top: map.get(var.$unit, 8);
            }

            &.point-color {
              font-weight: 700;
              color: map.get(color.$text-status, 'brand-sub') !important;
            }
          }

          & + .vits-alerts-anatomy {
            margin-top: map.get(var.$unit, 8);
          }
        }
      }

      &.type-toggle-body {
        .info-list {
          padding: map.get(var.$unit, 20) var.$mo-gutter;

          dd {
            justify-content: flex-end;
            text-align: right;

            &.text-discount {
              color: map.get(color.$text-status, 'brand');
            }
          }

          &.info-list-total {
            padding-top: var.$mo-section-gap;
            padding-bottom: var.$mo-section-gap;

            .total {
              &-label {
                min-height: 0;
                font-weight: 600;
                color: map.get(color.$text-colors, 'secondary');
              }

              &-amount {
                min-height: 0;
                font-size: fn.rem(18);
                font-weight: 700;
                color: map.get(color.$text-status, 'info-sub');
              }
            }

            .method {
              &-value {
                @include mx.flex(flex, row, flex-end, center, wrap);
                gap: fn.rem(10);
              }

              &-name {
                font-weight: 700;
              }

              &-detail {
                color: map.get(color.$text-status, 'info');
              }
            }
          }

          & + .info-list {
            box-shadow: 0 -1px 0 0 map.get(color.$layout-border, 'quinary');
          }
        }

        &:has(.round-body-actions) {
          .info-list-total {
            padding-bottom: map.get(var.$unit, 4);
          }
        }
      }
    }

    &-foot {
      @include mx.flex(flex, row, flex-end, center);
      gap: map.get(var.$unit, 8);
      height: map.get(var.$unit, 56);
      padding: 0 map.get(var.$unit, 16);
      box-shadow: inset 0 1px 0 0 map.get(color.$layout-border, 'quinary');

      &-price-label {
        @include mx.flex(flex, column, flex-end, flex-end);

        .text {
          @include typo.typography('b4r', $color: map.get(color.$text-colors, 'tertiary'));
        }

        .desc {
          @include typo.typography('b5r', $color: map.get(color.$text-colors, 'tertiary'));
        }
      }

      &-price-value {
        @include typo.typography('b1b', $color: map.get(color.$text-colors, 'primary'));
      }

      &.just-start {
        justify-content: flex-start;

        .text {
          font-size: fn.rem(14);
          font-weight: 600;
          color: map.get(color.$text-colors, 'secondary');
        }

        .round-foot-price-value {
          margin-left: auto;
        }
      }
    }
  }
}

// 마이페이지 홈 (대시보드)
.vm-mypage-home {
  &-profile {
    padding: var.$mo-gutter;
    background: color.$color-white;

    .profile {
      &-inner {
        padding: map.get(var.$unit, 20);
        background: map.get(color.$layout-status, 'info-bg-sub');
        border-radius: map.get(var.$radius, 'lg');
      }

      &-user-name {
        @include typo.typography('h3s', $color: map.get(color.$text-colors, 'primary'));
      }

      &-coupon {
        &-link {
          @include mx.flex(flex, row, flex-start, center);
          flex-shrink: 0;
          gap: map.get(var.$unit, 8);
          height: map.get(var.$unit, 32);
          padding: map.get(var.$unit, 4) var.$mo-gutter;
          background: color.$color-white;
        }

        &-title {
          @include mx.flex(flex, row, flex-start, center);
          gap: map.get(var.$unit, 4);

          .icon {
            @include icon.ic-size(fn.rem(14));
            flex-shrink: 0;
            color: #2f4f9e;
          }

          .text {
            @include typo.typography('m1s', $color: map.get(color.$text-status, 'info-sub'));
          }
        }

        &-total {
          @include typo.typography('m1s', $color: map.get(color.$text-status, 'info-sub'));
        }
      }
    }

    // type01
    &.profile-type01 {
      .profile {
        &-inner {
          @include mx.flex(flex, row, flex-start, flex-end, wrap);
          gap: var.$mo-gutter;
        }

        &-user {
          &-link {
            @include mx.flex(flex, row, flex-start, center);
            gap: fn.rem(10);
            padding: 0 map.get(var.$unit, 4);
            margin-right: auto;

            .icon {
              @include icon.ic-size(map.get(var.$unit, 20));
              flex-shrink: 0;
              color: map.get(color.$icon-neutral, 'primary');
            }
          }
        }

        &-coupon-link {
          border-radius: map.get(var.$unit, 32);
        }
      }
    }

    // type02
    &.profile-type02 {
      .profile {
        &-inner {
          @include mx.flex(flex, column);
          gap: var.$mo-gutter;

          > [class*='profile-'] {
            width: 100%;
          }
        }

        &-user {
          @include mx.flex(flex, row, flex-start, center);
          gap: fn.rem(10);
          padding-left: map.get(var.$unit, 4);

          .vits-text-arrow-link .icon {
            color: map.get(color.$icon-neutral, 'tertiary');
          }
        }

        &-coupon {
          &-link {
            border-radius: map.get(var.$radius, 'md');
          }

          &-total {
            margin-left: auto;
          }
        }
      }
    }
  }

  &-sections {
    @include mx.flex(flex, column);
    gap: map.get(var.$unit, 8);
  }

  // 주문 현황
  &-status {
    @include my-home-layout;

    .home-status {
      &-body {
        padding: var.$mo-section-gap var.$mo-gutter;
      }

      &-list {
        @include mx.flex(flex, row, space-between);
        gap: clamp(#{map.get(var.$unit, 2)}, 3.33vw, #{map.get(var.$unit, 12)});
      }

      &-item {
        flex: 1 1 0;
        min-width: 0;
      }

      &-link {
        @include mx.flex(flex, column, flex-start, center);
        width: 100%;
        text-align: center;

        /* stylelint-disable-next-line no-descending-specificity */
        .icon {
          @include icon.ic-size(map.get(var.$unit, 40));
          padding: map.get(var.$unit, 8);
          color: map.get(color.$icon-neutral, 'primary');
          background: map.get(color.$layout-surf, 'raised');
          border-radius: 50%;
        }

        /* stylelint-disable-next-line no-descending-specificity */
        .text {
          @include typo.typography('b4r', $color: map.get(color.$text-colors, 'primary'));
          padding-top: map.get(var.$unit, 4);
          white-space: nowrap;
        }

        /* stylelint-disable-next-line no-descending-specificity */
        .count {
          @include typo.typography('b3b', $color: map.get(color.$text-status, 'info-sub'));
          padding-top: var.$mo-gutter;
        }
      }
    }
  }

  // 메뉴
  &-menus {
    @include my-home-layout;

    // 마이페이지 메뉴
    &.menus-mypage {
      .home-menus {
        &-body {
          padding: map.get(var.$unit, 12) map.get(var.$unit, 32);
        }

        &-group {
          &-title {
            @include mx.flex(flex, row, flex-start, center);
            @include typo.typography('b4r', $color: map.get(color.$text-colors, 'tertiary'));
            height: fn.rem(30);
          }

          &:not(:first-of-type) {
            padding-top: map.get(var.$unit, 12);
          }

          &:not(:last-of-type) {
            @include mx.border('bottom', $color: map.get(color.$layout-surf, 'sunken'));
            padding-bottom: map.get(var.$unit, 8);
            margin-bottom: map.get(var.$unit, 8);
          }
        }

        &-link {
          @include mx.flex(flex, row, flex-start, center);
          height: fn.rem(42);

          .text {
            @include typo.typography('b3s');
            flex-grow: 1;
            min-width: 0;
          }

          /* stylelint-disable-next-line no-descending-specificity */
          .icon {
            @include icon.ic-size(var.$mo-gutter);
            flex-shrink: 0;
            color: map.get(color.$icon-neutral, 'tertiary');
          }
        }
      }
    }
  }

  &-guides {
    @include my-home-layout;

    // 데이터 없을 때
    .home-guides-empty {
      @include mx.flex(flex, column, flex-start, center);
      gap: map.get(var.$unit, 4);
      padding: var.$mo-section-gap 0 map.get(var.$unit, 20);

      &-title {
        @include typo.typography('b2s', $color: map.get(color.$text-colors, 'secondary'));
      }

      &-desc {
        @include typo.typography('b3r', $color: map.get(color.$text-colors, 'tertiary'));
        padding-bottom: map.get(var.$unit, 8);
      }

      [class*='vits-btn-'] {
        min-width: fn.rem(115);
      }
    }

    [class*='home-'][class*='-body'] {
      padding-top: map.get(var.$unit, 20);
      padding-bottom: map.get(var.$unit, 32);
    }

    // 여신 관리
    &.guides-credit {
      .home-credit {
        &-body {
          padding-right: var.$mo-section-gap;
          padding-left: var.$mo-section-gap;
        }

        &-usage {
          @include mx.flex(flex, row, flex-start, stretch, wrap);
          gap: map.get(var.$unit, 12);

          &-item {
            @include mx.flex(flex, column);
            flex: 1 1 calc(50% - fn.rem(6));
            gap: map.get(var.$unit, 2);
            min-width: 0;
            padding: map.get(var.$unit, 12);
            background: map.get(color.$layout-surf, 'raised');
            border-radius: map.get(var.$radius, 'sm');
          }

          &-label {
            @include typo.typography('b4s', $color: map.get(color.$text-colors, 'tertiary'));
          }

          &-value {
            @include mx.flex(flex, column, flex-start, flex-start);
            gap: map.get(var.$unit, 2);

            p {
              @include typo.typography('b2s', $color: map.get(color.$text-colors, 'secondary'));

              &.point-used {
                color: map.get(color.$text-status, 'info-sub');
              }

              &.point-due {
                color: map.get(color.$text-status, 'brand-sub');
              }
            }
          }

          &-sub {
            @include mx.flex(flex, row, flex-start, center);
            gap: map.get(var.$unit, 2);
            padding: map.get(var.$unit, 2) map.get(var.$unit, 4);
            background: map.get(color.$layout-surf, 'sunken');
            border-radius: map.get(var.$radius, 'sm');

            .text {
              @include typo.typography('b4r', $color: map.get(color.$text-colors, 'tertiary'));
            }

            .value {
              @include typo.typography('b4s', $color: map.get(color.$text-colors, 'tertiary'));
            }
          }
        }
      }
    }

    // 중요 서류
    &.guides-docs {
      .home-docs {
        &-body {
          padding-right: var.$mo-gutter;
          padding-left: var.$mo-gutter;
        }

        &-items {
          @include mx.flex(flex, column);
          gap: map.get(var.$unit, 12);
        }

        &-item {
          @include mx.flex(flex, row, flex-start, center);
          gap: var.$mo-gutter;
          padding: var.$mo-gutter;
          background: map.get(color.$layout-surf, 'raised');
          border-radius: map.get(var.$radius, 'sm');
          box-shadow: inset 0 0 0 1px map.get(color.$layout-border, 'quaternary');

          &-info {
            @include mx.flex(flex, column);
            flex-grow: 1;
            gap: map.get(var.$unit, 8);
            min-width: 0;
          }
        }

        &-text p {
          @include typo.typography('m1r', $color: map.get(color.$text-colors, 'tertiary'));
          @include mx.ellipsis-single;
        }

        &-price p {
          @include typo.typography('m1s', $color: map.get(color.$text-colors, 'primary'));
        }

        &-button {
          flex-shrink: 0;

          [class*='vits-btn-'] {
            width: fn.rem(70);
          }
        }
      }
    }
  }
}

// 주문배송 리스트
.vm-mypage-orders-list {
  padding: map.get(var.$unit, 20) var.$mo-gutter;

  .orders-list {
    @include mx.flex(flex, column);
    gap: map.get(var.$unit, 24);
  }

  &.type-shadow {
    box-shadow: map.get(var.$box-shadow, 'elevation_-1');
  }
}

// 주문상세
.vm-mypage-orders-details {
  padding: map.get(var.$unit, 12) var.$mo-gutter var.$mo-section-gap;
  background: color.$color-white;

  .details {
    &-header {
      @include mx.flex(flex, row, flex-start, center);
      width: 100%;
    }

    &-body {
      @include mx.flex(flex, row, space-between, center);
      @include mx.border('top', $color: map.get(color.$layout-border, 'quinary'));
      padding-top: map.get(var.$unit, 12);
      margin-top: map.get(var.$unit, 12);

      .details-date-info {
        flex: 0 0 calc(50% - map.get(var.$unit, 4));

        dt {
          @include typo.typography('b3r', $color: map.get(color.$text-colors, 'tertiary'));
        }

        /* stylelint-disable-next-line no-descending-specificity */
        dd {
          @include typo.typography('b3r', $color: map.get(color.$text-colors, 'primary'));
          margin-top: map.get(var.$unit, 4);
        }
      }
    }

    &-order {
      &-info {
        @include mx.flex(flex, column);
        gap: map.get(var.$unit, 2);
      }

      &-label {
        @include typo.typography('b3s', $color: map.get(color.$text-colors, 'secondary'));
      }

      &-date {
        @include typo.typography('b4r', $color: map.get(color.$text-colors, 'tertiary'));
      }

      &-number {
        @include typo.typography('b2s');
      }
    }

    &-overflow-menu {
      margin-left: auto;
    }

    &-address {
      @include mx.border('top', $color: map.get(color.$layout-border, 'quinary'));
      padding-top: map.get(var.$unit, 12);
      margin-top: map.get(var.$unit, 12);

      &-text {
        @include typo.typography('b3r', $color: map.get(color.$text-colors, 'secondary'));
      }
    }
  }
}

// 주문상세 - 결제/배송정보
.vm-order-details-info {
  @include mx.flex(flex, column);
  gap: var.$mo-section-gap;
  padding: 0 var.$mo-gutter map.get(var.$unit, 52);
}

// 반품신청 - 취소신청
.vm-claim-request {
  .claim-request {
    &-notice {
      padding: map.get(var.$unit, 12) var.$mo-gutter var.$mo-section-gap;
      background: color.$color-white;

      &-inner {
        padding: var.$mo-gutter var.$mo-section-gap var.$mo-gutter var.$mo-gutter;
        background: map.get(color.$layout-surf, 'raised');
        border-radius: map.get(var.$radius, 'lg');
      }

      &-list {
        @include mx.bullet-style(10, $w: 2, $h: 2);

        > li {
          @include typo.typography('b4r');
        }
      }
    }

    &-product-list {
      .product-list {
        &-head {
          padding: 0 var.$mo-gutter var.$mo-section-gap fn.rem(28);
          margin-top: (map.get(var.$unit, 4) * -1);
          background: color.$color-white;
        }

        &-body {
          padding: map.get(var.$unit, 20) var.$mo-gutter;
          box-shadow: map.get(var.$box-shadow, 'elevation_-1');
        }

        .product-item {
          padding: map.get(var.$unit, 12);
          background: color.$color-white;
          border-radius: map.get(var.$radius, 'sm');
          box-shadow: inset 0 0 0 1px map.get(color.$layout-border, 'tertiary');

          & + .product-item {
            margin-top: map.get(var.$unit, 12);
          }
        }
      }
    }

    &-reason {
      width: 100%;
      padding: 0 var.$mo-gutter map.get(var.$unit, 20);

      .reason {
        &-product-list {
          > li {
            padding: var.$mo-gutter;
            border-radius: map.get(var.$radius, 'md');
            box-shadow: inset 0 0 0 1px map.get(color.$layout-border, 'tertiary');

            .vm-product-mypage-card .card-content {
              align-items: center;
            }

            & + li {
              margin-top: map.get(var.$unit, 20);
            }
          }
        }

        &-write {
          @include mx.flex(flex, row, flex-start, flex-start, wrap);
          gap: map.get(var.$unit, 8) 0;
          margin-top: map.get(var.$unit, 8);

          /* stylelint-disable-next-line no-descending-specificity */
          dt {
            @include typo.typography('b3r', $color: map.get(color.$text-colors, 'primary'));
            flex: 0 0 32.43%;
            padding-top: fn.rem(5);
          }

          /* stylelint-disable-next-line no-descending-specificity */
          dd {
            flex: 0 0 67.57%;

            .vits-select {
              &,
              &-trigger {
                width: 100%;
              }
            }
          }
        }
      }
    }

    &-pickup {
      padding: 0 var.$mo-gutter var.$mo-section-gap;

      &-inner {
        @include mx.flex(flex, column);
        gap: map.get(var.$unit, 12);
        padding: var.$mo-gutter;
        border-radius: map.get(var.$radius, 'md');
        box-shadow: inset 0 0 0 1px map.get(color.$layout-border, 'tertiary');
      }

      .claim-request-pickup {
        &-head {
          @include mx.flex(flex, row, space-between, center);
          width: 100%;

          .pickup {
            &-title {
              @include typo.typography('b2s', $color: map.get(color.$text-colors, 'secondary'));
            }

            &-button {
              flex-shrink: 0;
            }
          }
        }

        &-body {
          .pickup-info {
            width: 100%;
            padding: map.get(var.$unit, 12);
            background: map.get(color.$layout-surf, 'raised');
            border-radius: map.get(var.$radius, 'sm');

            .user-info {
              @include typo.typography('b3s');
            }

            .user-address {
              @include typo.typography('b3r', $color: map.get(color.$text-colors, 'tertiary'));
              margin-top: map.get(var.$unit, 4);
            }

            &-date {
              @include mx.flex(flex, row, flex-start, flex-start, wrap);
              gap: map.get(var.$unit, 8) 0;
              margin-top: map.get(var.$unit, 8);

              /* stylelint-disable-next-line no-descending-specificity */
              dt {
                @include typo.typography('b3r', $color: map.get(color.$text-colors, 'primary'));
                flex: 0 0 32.43%;
                padding-top: fn.rem(5);
              }

              /* stylelint-disable-next-line no-descending-specificity */
              dd {
                flex: 0 0 67.57%;

                .vits-datepicker-single,
                .vits-select,
                .vits-select-trigger {
                  width: 100%;
                }

                .vits-textarea {
                  border-radius: map.get(var.$radius, 'sm');
                }

                .vits-select + .vits-input {
                  margin-top: map.get(var.$unit, 12);
                }

                &[data-bank-type='bank2'] {
                  padding-top: fn.rem(5);
                }
              }
            }

            &-memo {
              @include mx.flex(flex, column);
              gap: map.get(var.$unit, 8);
            }

            &-textarea,
            &-guide {
              width: 100%;
            }

            &-guide {
              > li {
                @include typo.typography('b5r', $color: map.get(color.$text-colors, 'secondary'));
                position: relative;
                padding-left: fn.rem(10);

                &::before {
                  @include mx.position(absolute, 0, $left: 0);
                  color: map.get(color.$text-status, 'brand');
                  content: '\002A';
                }

                & + li {
                  margin-top: fn.rem(6);
                }
              }
            }
          }
        }
      }
    }
  }
}

// 반품내역 - 취소내역 첨부이미지
.vm-claim-attachment {
  &-list {
    @include mx.flex(flex, row, flex-start, flex-start, wrap);
    gap: map.get(var.$unit, 8);

    /* stylelint-disable-next-line no-descending-specificity */
    > li {
      width: fn.rem(52);
      aspect-ratio: 1 / 1;
    }
  }

  &-button {
    @include mx.border('all', $color: map.get(color.$layout-border, 'quaternary'));
    @include mx.common-list-thumb(map.get(color.$layout-surf, 'base'));
    display: block;
    width: 100%;
    height: 100%;
    padding: fn.rem(6);
    border-radius: map.get(var.$radius, 'sm');
  }
}

// 쿠폰함 관리
.vm-mypage-coupon {
  @include mx.flex(flex, column);
  gap: var.$mo-section-gap;

  &-list {
    @include mx.flex(flex, column);
    gap: map.get(var.$unit, 32);
    padding-right: var.$mo-gutter;
    padding-left: var.$mo-gutter;

    /* stylelint-disable-next-line no-descending-specificity */
    .vits-alerts-anatomy {
      box-shadow: inset 0 0 0 1px map.get(color.$layout-border, 'info-soft');
    }
  }

  &-download {
    @include mx.flex(flex, column);
    gap: map.get(var.$unit, 12);
    width: calc(100% - (var.$mo-gutter * 2));
    padding: map.get(var.$unit, 20);
    margin: 0 auto;
    text-align: center;
    background: color.$color-white;
    border-radius: map.get(var.$radius, 'lg');
    box-shadow: map.get(var.$box-shadow, 'elevation_1');

    .coupon-download {
      &-head {
        @include mx.flex(flex, column);
        gap: map.get(var.$unit, 4);
      }

      &-title {
        @include typo.typography('b2s', $color: map.get(color.$text-colors, 'primary'));

        .point-color {
          color: map.get(color.$text-status, 'brand');
        }
      }

      &-desc {
        @include typo.typography('b4r', $color: map.get(color.$text-colors, 'secondary'));
      }

      &-button {
        padding: 0 map.get(var.$unit, 12);

        /* stylelint-disable-next-line no-descending-specificity */
        [class*='vits-btn-'] {
          width: 100%;
        }
      }
    }
  }

  &-title {
    @include typo.typography('h4s', $color: map.get(color.$text-colors, 'primary'));
    padding-right: var.$mo-gutter;
    padding-left: var.$mo-gutter;
  }

  &-group {
    @include mx.flex(flex, column);
    gap: var.$mo-gutter;

    /* stylelint-disable no-descending-specificity */
    .vits-empty-state {
      padding: map.get(var.$unit, 36) 0;
    }

    // 보유 쿠폰
    &.coupon-owned {
      .vits-empty-state {
        min-height: fn.rem(300);
      }
    }
    /* stylelint-enable no-descending-specificity */
  }
}

/* ================================================
======================= 팝업 =======================
================================================ */
// 첨부파일
.vm-attachment-popup {
  @include mx.flex(flex, row, center, center);
  width: 100%;
  max-width: 90vw;
  max-height: 60vh;
  overflow: hidden;

  img {
    display: block;
    max-width: 100%;
    max-height: 60vh;
    object-fit: contain;
    object-position: center;
  }
}

// 미발송내역
.vm-unshipped-detail-popup {
  @include mx.flex(flex, column);
  position: relative;
  gap: map.get(var.$unit, 16);

  .product {
    &-summary {
      @include mx.flex(flex, row, flex-start, center);
      gap: map.get(var.$unit, 8);
    }

    &-thumb {
      @include mx.img-fit;
      flex: 0 0 fn.rem(80);
      width: fn.rem(80);
      overflow: hidden;
      border-radius: map.get(var.$radius, 'md');
    }

    &-info {
      flex-grow: 1;
      min-width: 0;
    }

    &-brand {
      @include typo.typography('b4s', $color: map.get(color.$text-colors, 'tertiary'));
    }

    &-name {
      @include typo.typography('b4s', $color: map.get(color.$text-colors, 'primary'));
    }

    &-spec {
      @include typo.typography('b5r', $color: map.get(color.$text-colors, 'secondary'));
      padding-top: map.get(var.$unit, 2);
    }
  }

  .info-list {
    @include mx.flex(flex, row, flex-start, flex-start, wrap);

    /* stylelint-disable no-descending-specificity */
    dt,
    dd {
      padding-top: fn.rem(7);
      padding-bottom: fn.rem(7);
    }

    dt {
      @include typo.typography('b3r', $color: map.get(color.$text-colors, 'tertiary'));
      flex: 0 0 30.56%;
    }

    dd {
      @include typo.typography('b3r', $color: map.get(color.$text-colors, 'primary'));
      flex: 0 0 69.44%;

      .reason-box {
        @include typo.typography('b3r', $color: map.get(color.$text-colors, 'tertiary'));
        padding: map.get(var.$unit, 12);
        background: map.get(color.$layout-surf, 'raised');
        border-radius: map.get(var.$unit, 4);
      }
    }
    /* stylelint-enable no-descending-specificity */
  }
}

// 배송조회 & 반품회수조회
.vm-track-shipment {
  @include mx.flex(flex, column, flex-start, flex-start);
  background: map.get(color.$layout-surf, 'mypage');

  &-head {
    @include mx.flex(flex, row, center, center);
    width: 100%;
    padding: map.get(var.$unit, 12) var.$mo-gutter 0;
    background: color.$color-white;

    .shipment-info {
      @include mx.flex(flex, column, flex-start, flex-start);
      flex: 0 0 calc(50% - map.get(var.$unit, 4));
      gap: map.get(var.$unit, 4);

      &-inner {
        @include mx.flex(flex, row);
        @include mx.border('bottom', $color: map.get(color.$layout-border, 'quinary'));
        gap: map.get(var.$unit, 8);
        width: 100%;
        padding-bottom: var.$mo-gutter;
        margin-bottom: var.$mo-gutter;
      }

      dt {
        @include typo.typography('b3r', $color: map.get(color.$text-colors, 'secondary'));
      }

      dd,
      &-number {
        @include typo.typography('b2b', $color: map.get(color.$text-colors, 'primary'));
      }

      /* stylelint-disable-next-line no-descending-specificity */
      dd {
        @include mx.flex(flex, row, flex-start, center);
        gap: map.get(var.$unit, 8);
      }

      &-number {
        text-decoration: underline;
        text-underline-offset: 4px;
      }

      &-copy {
        @include button.btn-reset;
        @include icon.ic-size(map.get(var.$unit, 24));
        color: map.get(color.$icon-neutral, 'secondary');
      }
    }
  }

  &-body {
    @include mx.flex(flex, column, flex-start, flex-start);
    gap: map.get(var.$unit, 20);
    width: 100%;
    padding-bottom: var.$mo-section-gap;

    .shipment-steps {
      @include mx.flex(flex, row, flex-start, flex-start);
      width: 100%;
      padding: 0 var.$mo-gutter var.$mo-section-gap;
      background: color.$color-white;

      @for $i from 1 through 5 {
        &[data-current='#{$i}'] li:nth-of-type(#{$i}) {
          .step-icon {
            color: map.get(color.$icon-neutral, 'inverse');
            background: map.get(color.$layout-surf, 'brand');
          }

          .step-text,
          .step-title {
            font-weight: 600;
            color: map.get(color.$text-status, 'brand');
          }

          &::after {
            color: map.get(color.$icon-colors, 'primary');
          }
        }
      }

      .step {
        &-item {
          @include mx.flex(flex, row, flex-start, flex-start);
          flex: 1;
          width: 100%;

          &:last-of-type {
            flex: 0;
          }

          &:not(:last-of-type)::after {
            display: block; // flex container 안에서 flex item으로 참여
            flex: 1; // 남은 공간 채움
            width: 100%;
            min-width: map.get(var.$unit, 12);
            min-height: map.get(var.$unit, 12);
            margin: fn.rem(14) 0;
            content: ''; // 이게 있으면 가상 요소 생성됨
            background-color: currentcolor;
            mask: url('/public/resources/img/mro/renewal/ic/ic-arrow-right.svg') no-repeat center / contain;
          }
        }

        &-marker {
          @include mx.flex(flex, column, flex-start, center);
          gap: map.get(var.$unit, 8);
        }

        /* stylelint-disable-next-line no-descending-specificity */
        &-icon {
          @include mx.flex(flex, row, center, center);
          @include icon.ic-size(map.get(var.$unit, 36));
          flex-shrink: 0;
          padding: fn.rem(6.92);
          color: map.get(color.$icon-neutral, 'primary');
          background: map.get(color.$layout-surf, 'raised');
          border-radius: 50%;
        }

        &-text {
          @include typo.typography('b4r', $color: map.get(color.$text-colors, 'tertiary'));
          white-space: nowrap;
        }
      }

      &.type-column {
        flex-direction: column;
        width: fn.rem(331);
        margin: 0 auto;

        .step {
          &-item {
            flex-direction: column;

            &::after {
              position: static;
              margin: map.get(var.$unit, 20) 0 map.get(var.$unit, 20) fn.rem(21);
              transform: rotate(90deg);
            }
          }

          &-marker {
            flex-direction: row;
            gap: map.get(var.$unit, 24);
          }

          &-content {
            @include mx.flex(flex, column, flex-start, flex-start);
            gap: map.get(var.$unit, 8);
          }

          &-title {
            @include typo.typography('b1s', $color: map.get(color.$text-colors, 'primary'));
          }

          &-desc {
            @include typo.typography('b3r', $color: map.get(color.$text-colors, 'tertiary'));
          }
        }
      }
    }

    .shipment-detail {
      &:not(.is-empty) {
        @include mx.flex(flex, column, flex-start, flex-start);
        gap: map.get(var.$unit, 20);
        width: calc(100% - (var.$mo-gutter * 2));
        padding: 0 0 map.get(var.$unit, 20);
        margin: 0 auto;
        background: color.$color-white;
        border-radius: map.get(var.$radius, 'md');
        box-shadow: map.get(var.$box-shadow, 'elevation_1');
      }

      &.is-empty {
        @include mx.flex(flex, row, center, center);
      }

      &-title {
        @include typo.typography('b3s', $color: map.get(color.$text-colors, 'primary'));
        width: 100%;
        height: map.get(var.$unit, 52);
        padding: 0 var.$mo-gutter;
        line-height: map.get(var.$unit, 52);
        box-shadow: inset 0 -1px 0 0 map.get(color.$layout-border, 'quinary');
      }

      &-list {
        width: calc(100% - (var.$mo-gutter * 2));
        min-height: fn.rem(120);
        max-height: fn.rem(240);
        padding: map.get(var.$unit, 4);
        margin: 0 auto;
        overflow: hidden auto;
        background: linear-gradient(
          to right,
          transparent 20px,
          map.get(color.$layout-border, 'quaternary') 20px,
          map.get(color.$layout-border, 'quaternary') 24px,
          transparent 24px
        );
        border-radius: map.get(var.$radius, 'md');
        box-shadow: inset 0 0 0 1px map.get(color.$layout-border, 'quaternary');

        &-inner {
          @include mx.flex(flex, column, flex-start, flex-start);
          gap: map.get(var.$unit, 20);
          height: 100%;
          padding: map.get(var.$unit, 16) 0;
        }
      }

      &-item {
        @include mx.flex(flex, column, flex-start, flex-start);
        position: relative;
        gap: map.get(var.$unit, 4);
        width: 100%;
        padding: 0 map.get(var.$unit, 20) 0 fn.rem(60);

        &::before {
          @include mx.position(absolute, 50%, $left: 10px);
          width: map.get(var.$unit, 16);
          height: map.get(var.$unit, 16);
          content: '';
          background: map.get(color.$layout-surf, 'base');
          border-radius: 50%;
          box-shadow: inset 0 0 0 4px map.get(color.$layout-border, 'brand');
          transform: translateY(-50%);
        }
      }

      &-info {
        @include mx.flex(flex, row, flex-start, center);
        gap: map.get(var.$unit, 4);
      }

      &-location {
        @include typo.typography('b3r', $color: map.get(color.$text-colors, 'secondary'));
      }

      &-status {
        @include typo.typography('b3s', $color: map.get(color.$text-colors, 'primary'));

        &[data-status='completed'] {
          color: map.get(color.$text-status, 'brand');
        }
      }

      &-date {
        @include typo.typography('b4r', $color: map.get(color.$text-colors, 'tertiary'));
      }
    }
  }

  // 반품회수조회
  &.type-claim {
    .vm-track-shipment-head {
      padding-bottom: var.$mo-section-gap;
      box-shadow: map.get(var.$box-shadow, 'elevation_1');

      .shipment-info-inner {
        padding-bottom: 0;
        margin-bottom: 0;
        border: none;
      }
    }

    .vm-track-shipment-body {
      &:has(.shipment-detail.is-empty) {
        align-items: center;
        padding-top: var.$mo-section-gap;
      }

      &:not(:has(.shipment-detail.is-empty)) {
        gap: 0;

        .shipment-detail-title {
          width: calc(100% - (var.$mo-gutter * 2));
          margin: var.$mo-gutter auto 0;
          background: color.$color-white;
          border-radius: map.get(var.$radius, 'md') map.get(var.$radius, 'md') 0 0;
        }

        .shipment-steps.type-column {
          width: calc(100% - (var.$mo-gutter * 2));
          padding: map.get(var.$unit, 20) var.$mo-gutter;
          margin: 0 auto;
          border-radius: 0 0 map.get(var.$radius, 'md') map.get(var.$radius, 'md');
          box-shadow: map.get(var.$box-shadow, 'elevation_1');

          .step-content {
            gap: map.get(var.$unit, 2);
          }

          .step-title,
          .step-desc {
            font-size: fn.rem(12);
          }

          .step-item::after {
            width: map.get(var.$unit, 4);
            margin: map.get(var.$unit, 16) fn.rem(10);
            mask-image: url('/public/resources/img/mro/renewal/ic/ic-arrow-down.svg');
            transform: rotate(0deg);
          }
        }
      }
    }
  }
}

// 좋아요 폴더 만들기
.vm-like-folder {
  .vm-form-dl {
    @include mx.flex(flex, column);

    dt {
      @include typo.typography('b3s', $color: map.get(color.$text-colors, 'primary'));

      /* stylelint-disable-next-line no-descending-specificity */
      & ~ dt {
        margin-top: var.$mo-gutter;
      }
    }

    dd {
      margin-top: map.get(var.$unit, 8);
    }
  }
}
