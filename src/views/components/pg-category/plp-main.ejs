<% const _src = srcPath; const _public = publicPath; %>

<!-- prettier-ignore -->
<%
  // PLP 메인 클래스 교체용 (기본: 'vits-main-plp')
  var plpMainClass = (locals.plpMainClass || 'main-content-plp').trim();
  
  // 함께 본 상품 표시 여부 (기본: false)
  var showAlsoViewedSection = locals.showAlsoViewedSection === true;

  // swiperBaseCard를 locals에서 받아옴
  var swiperBaseCard = locals.swiperBaseCard || [];
%>

<!-- prettier-ignore -->
<%# PLP 전용 좌측 메뉴(카테고리/필터) %>
<div class="vits-grid-main-content <%= plpMainClass %>">
  <div class="result-bar">
    <div class="result-chips is-hidden" data-result-chips>
      <div class="plp-chip-area vits-chip-button-group" data-chip-area></div>
    </div>
    <div class="result-actions is-hidden" data-result-actions>
      <button type="button" class="result-clear-button" data-chip-clear>전체 해제</button>
    </div>
  </div>

  <div class="vits-product-section">
    <div class="vits-list-controls">
      <div class="list-count">
        <span class="total">총 <b>30</b>개</span> <span class="id">상품</span>
      </div>
      <div class="list-size">
        <!-- prettier-ignore -->
        <%- include(`${_src}/views/components/form/select.ejs`, {
          id: 'plp-view-count',
          name: 'viewCount',
          placeholder: '개수 선택',
          options: [
            { value: '20', text: '20개씩 보기' },
            { value: '40', text: '40개씩 보기' },
            { value: '60', text: '60개씩 보기' },
          ],
          value: (typeof viewCount !== 'undefined' && viewCount !== null) ? String(viewCount) : '20',
          disabled: false,
          className: 'type-ghost'
        }) %>
      </div>
      <div class="list-sort">
        <!-- prettier-ignore -->
        <%- include(`${_src}/views/components/form/select.ejs`, {
          id: 'plp-sort',
          name: 'sort',
          placeholder: '정렬 선택',
          options: [
            { value: '추천순', text: '추천순' },
            { value: '판매량순', text: '판매량순' },
            { value: '신상품순', text: '신상품순' },
            { value: '높은 가격순', text: '높은 가격순' },
            { value: '낮은 가격순', text: '낮은 가격순' },
          ],
          value: (typeof sort !== 'undefined' && sort !== null) ? String(sort) : '추천순',
          disabled: false
        }) %>
      </div>
      <div class="list-view">
        <button type="button" class="view-button view-thumb" aria-label="리스트형 전환" data-plp-view-toggle>
          <i class="ic"></i>
        </button>
      </div>
    </div>

    <!--
      [D] [상품 카드 상태/뷰 제어용 data & class 규칙]

      1. 리스트 사용처 구분 (상위 컨테이너 .vits-product-list)
      data-context="plp"       : 상품목록(PLP)
      data-context="main"      : 메인 상품 리스트
      data-context="like"      : 좋아요 리스트
      data-context="frequent"  : 자주구매 리스트
      data-context="compare"   : 비교함 리스트

      2. 리스트 뷰 타입 (상위 컨테이너 .vits-product-list)
      vits-product-list view-thumb : 썸네일(카드형) 목록
      vits-product-list view-list  : 리스트형 목록

      3. 상품 상세 링크 영역
        - 링크 적용: 썸네일, 상품명+규격(product-summary)
        - 링크 제외: 가격 영역, 좋아요/장바구니/비교 버튼 등 액션 영역
    -->
    <div class="vits-product-list view-thumb" data-plp-view-list data-context="like">
      <ul class="vits-product-list-items">
        <!-- S: 회원-판매중 -->
        <li class="vits-product-item">
          <!-- prettier-ignore -->
          <%- include(`${_src}/views/components/product/product-card.ejs`, {
            isMember: true,
            inStock: true,
            isCutProduct: false,
            code: '635311',
            brand: '농심',
            model: 'CR-13',
            name: '튀김우동 컵라면 6개입',
            spec: '2.6mm(광~5kg)',
            originPrice: 999999999,
            salePrice: 999999999,
            discountRate: 99,
            imageUrl: `${_public}/resources/img/mro/renewal/temp/temp-product-thumb-01.png`,
            productUrl: '#!',
            flags: { today: true, tomorrow: true, hot: true },
            promoBadge: { text: '무료배송', variant: 'free-ship' }
          }) %>
        </li>
        <!-- E: 회원-판매중 -->

        <!-- S: 회원-판매중 (상품명 길 때 - 말줄임) -->
        <li class="vits-product-item">
          <!-- prettier-ignore -->
          <%- include(`${_src}/views/components/product/product-card.ejs`, {
            isMember: true,
            inStock: true,
            isCutProduct: false,
            code: '63531',
            brand: '농심',
            model: 'CR-13',
            name: '튀김우동 컵라면 6개입 상품명이 길어질 땐 말줄임으로 표시가 됩니다 상품명이 길어요 길어요',
            spec: '2.6mm(광~5kg)',
            originPrice: 999999999,
            salePrice: 999999999,
            discountRate: 99,
            imageUrl: `${_public}/resources/img/mro/renewal/temp/temp-product-thumb-01.png`,
            productUrl: '#!',
            flags: { today: true, tomorrow: true, hot: true },
            promoBadge: { text: '무료배송', variant: 'free-ship' }
          }) %>
        </li>
        <!-- E: 회원-판매중 (상품명 길 때 - 말줄임) -->

        <!-- S: 회원-판매중 (할인율이 0.4% 이하일 때) -->
        <li class="vits-product-item">
          <!-- prettier-ignore -->
          <%- include(`${_src}/views/components/product/product-card.ejs`, {
            isMember: true,
            inStock: true,
            isCutProduct: false,
            code: '63531',
            brand: '농심',
            model: 'CR-13',
            name: '할인율이 0.4 이하일 때 - 할인율 비노출',
            spec: '2.6mm(광~5kg)',
            originPrice: 999999999,
            salePrice: 999999999,
            discountRate: 0.4,
            imageUrl: `${_public}/resources/img/mro/renewal/temp/temp-product-thumb-01.png`,
            productUrl: '#!',
            flags: { today: true, tomorrow: true, hot: true },
            promoBadge: { text: '무료배송', variant: 'free-ship' }
          }) %>
        </li>
        <!-- E: 회원-판매중 (할인율이 0.4% 이하일 때) -->

        <!-- S: 회원-판매중 (할인율이 0과 같거나 작을 때) -->
        <li class="vits-product-item">
          <!-- prettier-ignore -->
          <%- include(`${_src}/views/components/product/product-card.ejs`, {
            isMember: true,
            inStock: true,
            isCutProduct: false,
            code: '63531',
            brand: '농심',
            model: 'CR-13',
            name: '할인율이 0과 같거나 작을 때, 정상가/할인율 비노출',
            spec: '2.6mm(광~5kg)',
            originPrice: 999999999,
            salePrice: 999999999,
            discountRate: 0,
            imageUrl: `${_public}/resources/img/mro/renewal/temp/temp-product-thumb-01.png`,
            productUrl: '#!',
            flags: { today: true, tomorrow: true, hot: true },
            promoBadge: { text: '무료배송', variant: 'free-ship' }
          }) %>
        </li>
        <!-- E: 회원-판매중 (할인율이 0과 같거나 작을 때) -->

        <!-- S: 회원-판매중 조장상품 -->
        <li class="vits-product-item">
          <!-- prettier-ignore -->
          <%- include(`${_src}/views/components/product/product-card.ejs`, {
            isMember: true,
            inStock: true,
            isCutProduct: true,
            code: '63531',
            brand: '농심',
            model: 'CR-13',
            name: '회원 판매중 조장상품 경우, 장바구니 비노출',
            spec: '2.6mm(광~5kg)',
            originPrice: 999999999,
            salePrice: 999999999,
            discountRate: 99,
            imageUrl: `${_public}/resources/img/mro/renewal/temp/temp-product-thumb-02.png`,
            productUrl: '#!',
            flags: { today: true, tomorrow: true, hot: true },
            promoBadge: { text: '무료배송', variant: 'free-ship' }
          }) %>
        </li>
        <!-- E: 회원-판매중 조장상품 -->

        <!-- S: 회원-일시품절 -->
        <li class="vits-product-item">
          <!-- prettier-ignore -->
          <%- include(`${_src}/views/components/product/product-card.ejs`, {
            isMember: true,
            inStock: false,
            isCutProduct: false,
            code: '63531',
            brand: '농심',
            model: 'CR-13',
            name: '회원 판매중 일시품절 상품입니다. 상품명은 길게 길게 회원 판매중 일시품절 상품입니다.',
            spec: '2.6mm(광~5kg)',
            originPrice: 999999999,
            salePrice: 999999999,
            discountRate: 99,
            imageUrl: `${_public}/resources/img/mro/renewal/temp/temp-product-thumb-03.png`,
            productUrl: '#!',
            flags: { today: true, tomorrow: true, hot: true },
            promoBadge: { text: '무료배송', variant: 'free-ship' }
          }) %>
        </li>
        <!-- E: 회원-일시품절 -->

        <!-- S: 회원-일시품절-조장상품 -->
        <li class="vits-product-item">
          <!-- prettier-ignore -->
          <%- include(`${_src}/views/components/product/product-card.ejs`, {
            isMember: true,
            inStock: false,
            isCutProduct: true,
            code: '63531',
            brand: '농심',
            model: 'CR-13',
            name: '회원 일시품절, 조장상품입니다',
            spec: '2.6mm(광~5kg)',
            originPrice: 999999999,
            salePrice: 999999999,
            discountRate: 99,
            imageUrl: `${_public}/resources/img/mro/renewal/temp/temp-product-thumb-04.png`,
            productUrl: '#!',
            flags: { today: true, tomorrow: true, hot: true },
            promoBadge: { text: '무료배송', variant: 'free-ship' }
          }) %>
        </li>
        <!-- E: 회원-일시품절-조장상품 -->

        <!-- S: 비회원 -->
        <li class="vits-product-item">
          <!-- prettier-ignore -->
          <%- include(`${_src}/views/components/product/product-card.ejs`, {
            isMember: false,
            inStock: true,
            isCutProduct: false,
            code: '63531',
            brand: '농심',
            model: 'CR-13',
            name: '비회원 시, 장바구니 좋아요 비교담기 제거 & 가격정보 비노출',
            spec: '2.6mm(광~5kg)',
            originPrice: 999999999,
            salePrice: 999999999,
            discountRate: 99,
            imageUrl: `${_public}/resources/img/mro/renewal/temp/temp-product-thumb-05.png`,
            productUrl: '#!',
            flags: { today: true, tomorrow: true, hot: true },
            promoBadge: { text: '무료배송', variant: 'free-ship' }
          }) %>
        </li>
        <!-- E: 비회원 -->

        <% if (showAlsoViewedSection) { %>
        <!-- S: 스와이프 - 함께 본 상품 -->
        <li class="vits-product-item type-wide">
          <section class="vits-base-swiper-section">
            <h3 class="vits-base-swiper-title">
              이 상품을 구매한 고객이 <span class="point-color">함께 본 상품</span>
            </h3>
            <div class="vits-base-swiper">
              <%- include(`${_src}/views/components/swiper/swiper-base.ejs`, {
                  desktop: 4,
                  contents: swiperBaseCard,
                  swiperType: 'boxed',
              }) %>
            </div>
          </section>
        </li>
        <!-- E: 스와이프 - 함께 본 상품 -->
        <% } %>

        <!-- S: 회원-판매중 -->
        <li class="vits-product-item">
          <!-- prettier-ignore -->
          <%- include(`${_src}/views/components/product/product-card.ejs`, {
            isMember: true,
            inStock: true,
            isCutProduct: false,
            code: '635311',
            brand: '농심',
            model: 'CR-13',
            name: '튀김우동 컵라면 6개입',
            spec: '2.6mm(광~5kg)',
            originPrice: 999999999,
            salePrice: 999999999,
            discountRate: 99,
            imageUrl: `${_public}/resources/img/mro/renewal/temp/temp-product-thumb-01.png`,
            productUrl: '#!',
            flags: { today: true, tomorrow: true, hot: true },
            promoBadge: { text: '무료배송', variant: 'free-ship' }
          }) %>
        </li>
        <!-- E: 회원-판매중 -->

        <!-- S: 회원-판매중 (상품명 길 때 - 말줄임) -->
        <li class="vits-product-item">
          <!-- prettier-ignore -->
          <%- include(`${_src}/views/components/product/product-card.ejs`, {
            isMember: true,
            inStock: true,
            isCutProduct: false,
            code: '63531',
            brand: '농심',
            model: 'CR-13',
            name: '튀김우동 컵라면 6개입 상품명이 길어질 땐 말줄임으로 표시가 됩니다 상품명이 길어요 길어요',
            spec: '2.6mm(광~5kg)',
            originPrice: 999999999,
            salePrice: 999999999,
            discountRate: 99,
            imageUrl: `${_public}/resources/img/mro/renewal/temp/temp-product-thumb-01.png`,
            productUrl: '#!',
            flags: { today: true, tomorrow: true, hot: true },
            promoBadge: { text: '무료배송', variant: 'free-ship' }
          }) %>
        </li>
        <!-- E: 회원-판매중 (상품명 길 때 - 말줄임) -->

        <!-- S: 회원-판매중 (할인율이 0.4% 이하일 때) -->
        <li class="vits-product-item">
          <!-- prettier-ignore -->
          <%- include(`${_src}/views/components/product/product-card.ejs`, {
            isMember: true,
            inStock: true,
            isCutProduct: false,
            code: '63531',
            brand: '농심',
            model: 'CR-13',
            name: '할인율이 0.4 이하일 때 - 할인율 비노출',
            spec: '2.6mm(광~5kg)',
            originPrice: 999999999,
            salePrice: 999999999,
            discountRate: 0.4,
            imageUrl: `${_public}/resources/img/mro/renewal/temp/temp-product-thumb-01.png`,
            productUrl: '#!',
            flags: { today: true, tomorrow: true, hot: true },
            promoBadge: { text: '무료배송', variant: 'free-ship' }
          }) %>
        </li>
        <!-- E: 회원-판매중 (할인율이 0.4% 이하일 때) -->

        <!-- S: 회원-판매중 (할인율이 0과 같거나 작을 때) -->
        <li class="vits-product-item">
          <!-- prettier-ignore -->
          <%- include(`${_src}/views/components/product/product-card.ejs`, {
            isMember: true,
            inStock: true,
            isCutProduct: false,
            code: '63531',
            brand: '농심',
            model: 'CR-13',
            name: '할인율이 0과 같거나 작을 때, 정상가/할인율 비노출',
            spec: '2.6mm(광~5kg)',
            originPrice: 999999999,
            salePrice: 999999999,
            discountRate: 0,
            imageUrl: `${_public}/resources/img/mro/renewal/temp/temp-product-thumb-01.png`,
            productUrl: '#!',
            flags: { today: true, tomorrow: true, hot: true },
            promoBadge: { text: '무료배송', variant: 'free-ship' }
          }) %>
        </li>
        <!-- E: 회원-판매중 (할인율이 0과 같거나 작을 때) -->

        <!-- S: 회원-판매중 조장상품 -->
        <li class="vits-product-item">
          <!-- prettier-ignore -->
          <%- include(`${_src}/views/components/product/product-card.ejs`, {
            isMember: true,
            inStock: true,
            isCutProduct: true,
            code: '63531',
            brand: '농심',
            model: 'CR-13',
            name: '회원 판매중 조장상품 경우, 장바구니 비노출',
            spec: '2.6mm(광~5kg)',
            originPrice: 999999999,
            salePrice: 999999999,
            discountRate: 99,
            imageUrl: `${_public}/resources/img/mro/renewal/temp/temp-product-thumb-02.png`,
            productUrl: '#!',
            flags: { today: true, tomorrow: true, hot: true },
            promoBadge: { text: '무료배송', variant: 'free-ship' }
          }) %>
        </li>
        <!-- E: 회원-판매중 조장상품 -->

        <!-- S: 회원-일시품절 -->
        <li class="vits-product-item">
          <!-- prettier-ignore -->
          <%- include(`${_src}/views/components/product/product-card.ejs`, {
            isMember: true,
            inStock: false,
            isCutProduct: false,
            code: '63531',
            brand: '농심',
            model: 'CR-13',
            name: '회원 판매중 일시품절 상품입니다. 상품명은 길게 길게 회원 판매중 일시품절 상품입니다.',
            spec: '2.6mm(광~5kg)',
            originPrice: 999999999,
            salePrice: 999999999,
            discountRate: 99,
            imageUrl: `${_public}/resources/img/mro/renewal/temp/temp-product-thumb-03.png`,
            productUrl: '#!',
            flags: { today: true, tomorrow: true, hot: true },
            promoBadge: { text: '무료배송', variant: 'free-ship' }
          }) %>
        </li>
        <!-- E: 회원-일시품절 -->

        <!-- S: 회원-일시품절-조장상품 -->
        <li class="vits-product-item">
          <!-- prettier-ignore -->
          <%- include(`${_src}/views/components/product/product-card.ejs`, {
            isMember: true,
            inStock: false,
            isCutProduct: true,
            code: '63531',
            brand: '농심',
            model: 'CR-13',
            name: '회원 일시품절, 조장상품입니다',
            spec: '2.6mm(광~5kg)',
            originPrice: 999999999,
            salePrice: 999999999,
            discountRate: 99,
            imageUrl: `${_public}/resources/img/mro/renewal/temp/temp-product-thumb-04.png`,
            productUrl: '#!',
            flags: { today: true, tomorrow: true, hot: true },
            promoBadge: { text: '무료배송', variant: 'free-ship' }
          }) %>
        </li>
        <!-- E: 회원-일시품절-조장상품 -->

        <!-- S: 비회원 -->
        <li class="vits-product-item">
          <!-- prettier-ignore -->
          <%- include(`${_src}/views/components/product/product-card.ejs`, {
            isMember: false,
            inStock: true,
            isCutProduct: false,
            code: '63531',
            brand: '농심',
            model: 'CR-13',
            name: '비회원 시, 장바구니 좋아요 비교담기 제거 & 가격정보 비노출',
            spec: '2.6mm(광~5kg)',
            originPrice: 999999999,
            salePrice: 999999999,
            discountRate: 99,
            imageUrl: `${_public}/resources/img/mro/renewal/temp/temp-product-thumb-05.png`,
            productUrl: '#!',
            flags: { today: true, tomorrow: true, hot: true },
            promoBadge: { text: '무료배송', variant: 'free-ship' }
          }) %>
        </li>
        <!-- E: 비회원 -->
        </li>
      </ul>

      <div class="vits-product-pagination">
        <%- include(`${_src}/views/components/pagination.ejs`, { type: 'default', current: 1, isPrevDisabled: true }) %>
      </div>
    </div>
  </div>
</div>
