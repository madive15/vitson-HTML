<!-- prettier-ignore -->
<%
  /*
    status-text
    - type + status 코드만으로 텍스트 자동 출력
    params:
    - type: 'order' | 'claim' (필수)
    - status: '01'~ (필수)  // 숫자(1)로 와도 내부에서 '01'로 보정
    - device: 'pc' | 'mobile' (선택, default 'pc')
    - tag: string (선택, default 'p')
    - addClassName: string (선택)
    - text: string (선택) // 있으면 매핑보다 우선(예외 처리용)
  */

  const _type = (typeof type !== 'undefined' && type) ? String(type) : '';
  const _device = (typeof device !== 'undefined' && device) ? String(device) : 'pc';
  const _tag = (typeof tag !== 'undefined' && tag) ? String(tag) : 'p';
  const _add = (typeof addClassName !== 'undefined' && addClassName) ? String(addClassName).trim() : '';

  // status 보정: 1 -> '01'
  let _statusRaw = (typeof status !== 'undefined' && status !== null) ? String(status).trim() : '';
  if (_statusRaw.length === 1) _statusRaw = `0${_statusRaw}`;
  const _status = _statusRaw;

  const _suffix = _device === 'mobile' ? '-mobile' : '';
  const _baseClass = (_type === 'order')
    ? `text-order-status${_suffix}`
    : (_type === 'claim')
      ? `text-claim-status${_suffix}`
      : '';

  // 코드 → 텍스트 매핑
  const ORDER_TEXT = {
    '01': '주문접수',
    '02': '결제완료',
    '03': '주문완료',
    '04': '주문확정',
    '05': '배송준비중',
    '06': '배송중',
    '07': '배송완료',
  };

  const CLAIM_TEXT = {
    '01': '취소',
    '02': '취소신청',
    '03': '주문취소',
    '04': '반품',
    '05': '반품신청',
    '06': '반품접수',
    '07': '회수진행중',
    '08': '회수완료',
    '09': '반품완료',
    '10': '반품취소',
    '11': '반품승인불가',
    '12': '반품불가',
  };

  // text가 넘어오면 우선, 아니면 매핑에서 찾기
  const _textOverride = (typeof text !== 'undefined' && text !== null && String(text).trim() !== '') ? String(text).trim() : '';
  const _textFromMap = (_type === 'order') ? ORDER_TEXT[_status] : (_type === 'claim') ? CLAIM_TEXT[_status] : '';
  const _text = _textOverride || _textFromMap;

%>

<% if (_baseClass && _status && _text) { %>
  <<%= _tag %> class="<%= _baseClass %><% if (_add) { %> <%= _add %><% } %>" data-status="<%= _status %>"><%= _text %></<%= _tag %>>
<% } %>