<% const _src = srcPath; const _public = publicPath; %>

<%
  const _list = typeof list !== 'undefined' ? list : '';   // 예: 'row'
  const _gap = typeof gap !== 'undefined' ? gap : '';      // 예: 16
  const _size = (typeof size !== 'undefined' && size) ? String(size) : ''; // 'm' | 's'
  const sizeClass = _size ? `size-${_size}` : '';

  // 예) list-row-gap16 형태로 조합
  const listClass = (_list && _gap !== '' && _gap !== null)
    ? `list-${_list}-gap${_gap}`
    : (_list ? `list-${_list}` : (_gap !== '' && _gap !== null ? `gap${_gap}` : ''));

  const formatNumber = (num) => {
    if (num === null || num === undefined || num === '') return '';
    return Number(num).toLocaleString('ko-KR');
  };
%>
<!-- DEBUG: size=<%= typeof size !== 'undefined' ? size : 'undefined' %> -->
<div class="checkbox-wrapper type-<%= variant %><% if (sizeClass) { %> <%= sizeClass %><% } %>">
  <ul class="checkbox-item-area<% if (listClass) { %> <%= listClass %><% } %>">
    <% datas.forEach((data) => { 
        const text = data.text ?? '';
        const qty = data.qty ?? '';
    %>
      <li class="checkbox-item-box">
        <label class="checkbox-item">
          <input
            type="checkbox"
            name="<%= name %>"
            value="<%= data.value %>"
            <% if (data.disabled === true) { %>disabled<% } %>
            <% if (data.checked === true) { %>checked<% } %>
            <% if (data.required === true) { %>required<% } %>
          />

          <% if (variant === "basic") { %>
          <!-- basic -->
          <span class="checkbox-icon" aria-hidden="true"></span>
          <span class="label-name">
            <%= text %>
            <% if (data.qty !== undefined && data.qty !== null && data.qty !== '') { %>
              <em class="label-unit"><%= data.qty %></em>
            <% } %>
          </span>
          <% } else if (variant === "card") { %>
          <!-- card -->
          <span class="label-name"><%= text %></span>
          <span class="label-total"><%= data.total %>개 항목</span>
          <span class="checkbox-icon" aria-hidden="true">
            <%- include(`${_src}/views/components/icon.ejs`, { iconName: 'check' }) %> 
          </span>
          <% } %>
        </label>
      </li>
    <% }); %>
  </ul>
</div>
