<% const _src = srcPath; const _public = publicPath; %>

<%
const winId = id;
const winTitle = (typeof title !== 'undefined' && title) ? title : '';
const winVariant = (typeof variant !== 'undefined' && variant) ? variant : '';
const winSubtitle = (typeof subtitle !== 'undefined' && subtitle) ? subtitle : '';
const winInfoTitle = (typeof infotitle !== 'undefined' && infotitle) ? infotitle : '';
const winContentPath = (typeof contentPath !== 'undefined' && contentPath) ? contentPath : '';
const winContentHtml = (typeof contentHtml !== 'undefined' && contentHtml) ? contentHtml : '';
const winButtons = (typeof buttons !== 'undefined' && buttons) ? buttons : [];
const winContentData = (typeof contentData !== 'undefined' && contentData) ? contentData : {};
const winClassName = (typeof className !== 'undefined' && className) ? className : '';
const winFooterPath = (typeof footerPath !== 'undefined' && footerPath) ? footerPath : '';
const winFooterHtml = (typeof footerHtml !== 'undefined' && footerHtml) ? footerHtml : '';
const winHasFooter = (typeof hasFooter !== 'undefined') ? hasFooter : (winButtons.length > 0 || !!winFooterPath || !!winFooterHtml);
const winHeaderFilter = (typeof headerFilter !== 'undefined') ? !!headerFilter : false;
%>

<div
  id="<%= winId %>"
  class="vm-modal-inner<%= winClassName ? ' ' + winClassName : '' %>"
  data-ui="kendo-window"
  <% if (winVariant) { %>data-variant="<%= winVariant %>"<% } %>
  <% if (winHeaderFilter) { %>data-toggle-scope<% } %>
  role="dialog"
  aria-modal="true"
  aria-labelledby="<%= winId %>-title"
  <% const winDescribedBy = [winSubtitle ? `${winId}-subtitle` : '', winInfoTitle ? `${winId}-infotitle` : ''].filter(Boolean).join(' '); %>
  <% if (winDescribedBy) { %>aria-describedby="<%= winDescribedBy %>"<% } %>
  style="display:none;"
>
  <!-- 헤더 -->
  <div class="vm-modal-header">
    <div class="vm-modal-header-content">
      <h2 class="vm-modal-title" id="<%= winId %>-title"><%= winTitle %></h2>
<% if (winSubtitle) { %>
      <p class="vm-modal-subtitle" id="<%= winId %>-subtitle"><%= winSubtitle %></p>
<% } %>
<% if (winInfoTitle) { %>
      <p class="vm-modal-infotitle" id="<%= winId %>-infotitle"><%- winInfoTitle %></p>
<% } %>
    </div>
<% if (winHeaderFilter) { %>
    <!-- prettier-ignore -->
    <%- include(`${_src}/views/components-mo/filter/filter-btn.ejs`, {
      attrs: 'data-toggle-btn data-toggle-target="specFilter" aria-expanded="false"'
    }) %>
<% } %>
    <button type="button" class="vm-modal-close" onclick="VmKendoWindow.close('<%= winId %>')" aria-label="닫기">
      <%- include(`${_src}/views/components/icon.ejs`, { iconName: 'x' }) %>
    </button>
  </div>

  <!-- 컨텐츠 -->
  <div class="vm-modal-content<% if (!winHasFooter) { %> no-footer<% } %>" data-scroll-check>
  <% if (winContentHtml) { %>
    <%- winContentHtml %>
  <% } else if (winContentPath) { %>
      <%- include(winContentPath, Object.assign({}, winContentData)) %>
  <% } %>
  </div>

  <!-- 푸터 -->
<% if (winHasFooter) { %>
  <div class="vm-modal-footer">
<% if (winFooterHtml) { %>
    <%- winFooterHtml %>
<% } else if (winFooterPath) { %>
    <%- include(winFooterPath, Object.assign({}, winContentData)) %>
<% } else if (winButtons.length > 0) { %>
    <div class="vm-modal-buttons <%= winButtons.length === 1 ? 'is-single' : 'is-double' %>">
<% winButtons.forEach(function(btn) {
  const btnType = btn.type || 'button';
  const btnVariant = btn.variant || 'primary';
  const btnAction = btn.action || '';
  const btnAttrs = btn.attrs || {};
%>
      <button type="<%= btnType %>" class="vm-modal-btn vm-modal-btn-<%= btnVariant %>"<% if (btnAction === 'close') { %> onclick="VmKendoWindow.close('<%= winId %>')"<% } %><% Object.keys(btnAttrs).forEach(function(attrKey) { %> <%= attrKey %>="<%= btnAttrs[attrKey] %>"<% }); %>>
        <span class="text"><%= btn.text %></span>
      </button>
<% }); %>
    </div>
<% } %>
  </div>
<% } %>
</div>