<% const _src = srcPath; const _public = publicPath; %>
<!-- prettier-ignore -->
<%
const tabId = 'promo-products';
const activeId = 'chemical';
const IMG_BASE = `${_public}/resources/img/mro/renewal/temp`;

// 탭 카테고리
const tabItems = [
  { id: 'chemical', label: '방청/접착/케미칼' },
  { id: 'hardware', label: '철물/농기구/원예/미장' },
  { id: 'measure', label: '측정/유압/에어공구' },
  { id: 'hvac', label: '공조/환풍기/펌프/호스' },
  { id: 'cleaning', label: '청소/위생/와이퍼' },
  { id: 'apartment', label: '공동주택관리용품' }
];
%>
<!DOCTYPE html>
<!-- 
  [D] vits-scope: 스크롤바 커스텀 범위 제한(운영 전역 scrollbar 충돌 방지)
    - 문서 스크롤 주체가 html/body로 달라질 수 있어 둘 다 클래스 적용 
  -->
<html lang="ko" class="vits-scope">
  <%- include(`${_src}/views/layout/head.ejs`, {meta_title: '기획전 상품목록'}) %>
  <!-- [D] vits-scope 적용(상단 주석 참고) -->
  <body class="vits-scope">
    <!-- S: Skip Navigation -->
    <a href="#skipNav" class="skip-nav">본문 바로가기</a>
    <!-- E: Skip Navigation -->

    <!-- S: vits-wrapper -->
    <section class="vits-wrapper">
      <%- include(`${_src}/views/layout/header.ejs`) %>

      <!-- S: vits-main -->
      <main id="skipNav" class="vits-main">
        <!-- S: vits-wrap -->
        <div class="vits-wrap">
          <!-- S: vits-grid -->
          <div class="vits-grid">
            <!-- S: vits-grid-main -->
            <div class="vits-grid-main vits-main-promo-products">
              <div class="vits-inner">
                <!-- S: 기획전 상품목록 탭 -->
                <div class="vits-promo-products">
                  <div class="promo-products-header">
                    <div class="header-main">
                      <h2 class="title">사무용품 기획전</h2>
                      <div class="banner">
                        <img src="<%= IMG_BASE %>/temp-ex01.jpg" alt="사무용품 기획전" />
                      </div>
                      <p class="desc">텍스트 영역</p>
                    </div>
                    <!-- [D] 산업군별 템플릿에서는 header-sub 숨김 처리 -->
                    <div class="header-sub">
                      <h3 class="title">사무용품 기획전 타이틀2 영역</h3>
                      <p class="desc">텍스트 영역</p>
                    </div>
                  </div>

                  <div class="promo-products-body">
                    <div class="vits-promo-products-tab" data-vits-tab="promo-products-category">
                      <ul class="promo-products-tab-nav" data-tab-nav role="tablist" aria-label="기획전 카테고리">
                        <% tabItems.forEach((item) => { const isActive = item.id === activeId; %>
                        <li>
                          <button
                            type="button"
                            id="tab-<%= tabId %>-<%= item.id %>"
                            class="tab-btn<%= isActive ? ' is-active' : '' %>"
                            data-tab-id="<%= item.id %>"
                            role="tab"
                            aria-selected="<%= isActive %>"
                            aria-controls="panel-<%= tabId %>-<%= item.id %>"
                            tabindex="<%= isActive ? '0' : '-1' %>"
                          >
                            <span class="tab-btn-text"><%= item.label %></span>
                          </button>
                        </li>
                        <% }) %>
                      </ul>

                      <div class="promo-products-tab-content" data-tab-content>
                        <% tabItems.forEach((item) => { const isActive = item.id === activeId; %>
                        <div
                          class="tab-panel<%= isActive ? ' is-active' : '' %>"
                          data-tab-panel="<%= item.id %>"
                          id="panel-<%= tabId %>-<%= item.id %>"
                          role="tabpanel"
                          aria-labelledby="tab-<%= tabId %>-<%= item.id %>"
                          aria-hidden="<%= !isActive %>"
                        >
                          <!-- 상품 목록 영역 -->
                          <!-- prettier-ignore -->
                          <%- include(`${_src}/views/components/pg-promo/promo-product-list.ejs`, {
                              listClass: 'product-cols-4'
                          }) %>
                        </div>
                        <% }) %>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- E: 기획전 상품목록 탭 -->
              </div>
            </div>
            <!-- E: vits-grid-main -->
          </div>
          <!-- E: vits-grid -->
        </div>
        <!-- E: vits-wrap -->
      </main>
      <!-- E: vits-main -->

      <%- include(`${_src}/views/layout/footer.ejs`) %>
    </section>
    <!-- E: vits-wrapper -->

    <%- include(`${_src}/views/layout/footer.links.ejs`) %>

    <!-- [REMOVE] 퍼블 확인용 임시 코드 - 개발 적용 시 제거 -->
    <script>
      (function () {
        var params = new URLSearchParams(window.location.search);
        var $ = window.jQuery;

        // ?cols6 : 6열 레이아웃
        if (params.has('cols6')) {
          var lists = document.querySelectorAll('.vits-product-list');
          lists.forEach(function (el) {
            el.classList.remove('product-cols-4');
            el.classList.add('product-cols-6');
          });
        }

        // ?industry : 산업군별 템플릿 (헤더 설명 숨김)
        if (params.has('industry')) {
          var els = document.querySelectorAll('.header-main .desc, .header-sub');
          els.forEach(function (el) {
            el.style.display = 'none';
          });
        }
      })();
    </script>
  </body>
</html>
