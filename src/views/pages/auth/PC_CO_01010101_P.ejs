<% const _src = srcPath; const _public = publicPath; %>
<!DOCTYPE html>
<html lang="ko" class="vits-scope">
  <%- include(`${_src}/views/layout/head.ejs`, {meta_title: '이용약관 (공통팝업)'}) %>
  <body class="vits-scope">
    <a href="#skipNav" class="skip-nav">본문 바로가기</a>

    <section class="vits-wrapper">
      <%- include(`${_src}/views/layout/header.ejs`) %>

      <main id="skipNav" class="vits-main">
        <div class="vits-wrap">
          <div class="vits-grid">
            <div class="vits-grid-main vits-main-plp">
              <div class="vits-inner" style="padding: 100px 0">
                <button
                  type="button"
                  class="vits-btn-md vits-btn-outline-secondary"
                  onclick="VitsKendoWindow.open('termsCommonModal')"
                >
                  <!-- prettier-ignore -->
                  <span class="text" style="text-align: left;">이용약관,<br>개인정보처리방침,<br>마케팅 및 광고 알림 설정 상세보기 ,<br>기업회원 및 공급처 이용 동의 팝업
                    (공통팝업)</span>
                </button>
              </div>

              <!-- prettier-ignore -->
              <% const winModal = { 
                id: 'termsCommonModal', 
                size: '960',
                title: '이용약관', 
                opt: { draggable: true }, 
                contentPath: `${_src}/views/pages/kendo-window/auth/kw-PC_CO_01010101_P.ejs`,
                buttons: [{text: '확인', type: 'submit', variant: 'primary', size: 'full', action: 'close' }],
              }; 
              %>
              <%- include(`${_src}/views/components/kendo/kendo-window.ejs`, winModal) %>
            </div>
          </div>
        </div>
      </main>

      <%- include(`${_src}/views/layout/footer.ejs`) %>
    </section>

    <%- include(`${_src}/views/layout/footer.links.ejs`) %>

    <script>
      /**
       * [REMOVE] 퍼블 확인용 - 개발 적용 시 제거
       * type 파라미터에 따라 document.title, 모달 타이틀, vits-signup-terms-article 노출 제어
       */
      (function () {
        var urlParams = new URLSearchParams(window.location.search);
        var type = urlParams.get('type') || 'terms';

        var titles = {
          terms: '이용약관 (공통팝업)',
          privacy: '개인정보 수집 및 이용 동의',
          marketing: '마케팅 및 광고 알림 설정 상세보기',
          'marketing-enterprise': '기업회원 및 공급처 이용 동의',
          'marketing-customer': '매출처 이용 동의'
        };

        document.title = titles[type] || titles.terms;

        var modalTitle = document.querySelector('#termsCommonModal .vits-modal-title');
        var articles = document.querySelectorAll('#termsCommonModal .vits-signup-terms-article');

        if (modalTitle) modalTitle.textContent = titles[type] || titles.terms;
        articles.forEach(function (el) {
          el.hidden = el.getAttribute('data-terms-type') !== type;
        });
      })();
    </script>
  </body>
</html>
