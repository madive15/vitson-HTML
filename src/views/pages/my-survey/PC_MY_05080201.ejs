<% const _src = srcPath; const _public = publicPath; %>
<!DOCTYPE html>
<!--
  [D] vits-scope: 스크롤바 커스텀 범위 제한(운영 전역 scrollbar 충돌 방지)
    - 문서 스크롤 주체가 html/body로 달라질 수 있어 둘 다 클래스 적용
  -->
<html lang="ko" class="vits-scope">
  <%- include(`${_src}/views/layout/head.ejs`, {meta_title: '설문지'}) %>
  <!-- [D] vits-scope 적용(상단 주석 참고) -->
  <body class="vits-scope">
    <!-- S: Skip Navigation -->
    <a href="#skipNav" class="skip-nav">본문 바로가기</a>
    <!-- E: Skip Navigation -->

    <!-- S: vits-wrapper -->
    <section class="vits-wrapper">
      <%- include(`${_src}/views/layout/header.ejs`) %>

      <!-- S: vits-main -->
      <main id="skipNav" class="vits-main">
        <!-- S: vits-wrap -->
        <div class="vits-wrap">
          <!-- S: vits-grid -->
          <div class="vits-grid">
            <!-- S: vits-grid-main -->
            <div class="vits-grid-main vits-main-my-survey">
              <div class="vits-inner inner-column">
                <!-- 1280 컨텐츠 -->
                <div class="vits-grid-area">
                  <!-- S: vits-grid-side-left -->
                  <!-- prettier-ignore -->
                  <%- include(`${_src}/views/layout/lnb/lnb-mypage.ejs`, {currentMenu: 'info-survey'}) %>
                  <!-- E: vits-grid-side-left -->

                  <div class="vits-grid-main-content main-content-survey">
                    <!-- 메인 컨텐츠 -->

                    <!-- 컨텐츠 헤딩 -->
                    <div class="vits-mypage-content-headline survey-headline">
                      <h2 class="vits-mypage-content-title">설문지</h2>
                    </div>

                    <div class="vits-mypage-panel survey-panel inner-lg">
                      <!-- 설문지 정보 -->
                      <!-- prettier-ignore -->
                      <div class="survey-info">
                        <div class="survey-card">
                          <div class="survey-card-item">
                            <span class="survey-card-label">제목</span>
                            <div class="survey-card-content">
                              <span class="survey-card-title">2025년 12월 만족도 설문</span>
                            </div>
                          </div>
                          <div class="survey-card-item">
                            <span class="survey-card-label">설문기간</span>
                            <div class="survey-card-daterange">
                              2025-12-29<br>~2026-01-10
                            </div>
                          </div>
                          <div class="survey-card-item">
                            <span class="survey-card-label">상태</span>
                            <!-- prettier-ignore -->
                            <div class="survey-card-content" data-survey-status>
                              <%- include(`${_src}/views/components/label/general-label.ejs`, { text: '진행중', variant: 'blue' }) %>
                            </div>
                          </div>
                          <div class="survey-card-item">
                            <span class="survey-card-label">총점</span>
                            <div class="survey-card-content">
                              <span class="score">4.55</span>/
                              <span class="max">5</span>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- 목록 테이블 -->
                      <div class="general-table-wrap survey-table">
                        <table class="general-table" summary="설문조사 목록">
                          <!-- prettier-ignore -->
                          <%- include(`${_src}/views/components/table/thead-row.ejs`, {
                            caption: '설문조사 목록',
                            columns: [
                              { width: 80, label: '순번' },
                              { width: 'auto', label: '설문명' },
                              { width: 300, label: '총점' },
                            ]
                          }) %>

                          <tbody>
                            <!-- prettier-ignore -->
                            <%- include(`${_src}/views/components/table/tbody-row.ejs`, {
                              type: 'survey-ing',
                              rowIndex: 1,
                              question: '제품의 퀄리티는 만족하십니까?',
                              score: 0,
                            }) %>
                            <!-- prettier-ignore -->
                            <%- include(`${_src}/views/components/table/tbody-row.ejs`, {
                              type: 'survey-ing',
                              rowIndex: 2,
                              question: '서비스 환경 만족하십니까?',
                              score: 0,
                            }) %>
                            <!-- prettier-ignore -->
                            <%- include(`${_src}/views/components/table/tbody-row.ejs`, {
                              type: 'survey-ing',
                              rowIndex: 3,
                              question: '배송상태는 괜찮았나요?',
                              score: 4,
                            }) %>
                          </tbody>
                        </table>
                      </div>
                    </div>

                    <!-- prettier-ignore -->
                    <!-- 버튼영역 -->
                    <div class="mypage-button-area in-survey">
                      <!-- prettier-ignore -->
                      <%- include(`${_src}/views/components/button/button.ejs`, { 
                        size: 'xl', 
                        variant: 'outline-secondary', 
                        iconName: 'ic-arrow-left',
                        iconLeft: true,
                        text: '목록으로' }) %>
                      <!-- prettier-ignore -->
                      <%- include(`${_src}/views/components/button/button.ejs`, { 
                        size: 'xl', 
                        variant: 'primary', 
                        text: '제출하기' }) %>
                    </div>
                  </div>
                </div>
              </div>

              <!-- full wide 컨텐츠 -->
            </div>
            <!-- E: vits-grid-main -->
          </div>
          <!-- E: vits-grid -->
        </div>
        <!-- E: vits-wrap -->
      </main>
      <!-- E: vits-main -->

      <%- include(`${_src}/views/layout/footer.ejs`) %>
    </section>
    <!-- E: vits-wrapper -->

    <%- include(`${_src}/views/layout/footer.links.ejs`) %>

    <!--
    /**
     * [REMOVE] 퍼블 확인용 - 개발 적용 시 제거
     * type=end 파라미터 처리
     * URL에 type=end 있으면: 상태를 '종료'(gray)로 표시, 제출하기 버튼 숨김
    -->
    <script>
      (function () {
        var params = new URLSearchParams(window.location.search);
        if (params.get('type') !== 'end') return;

        var statusEl = document.querySelector('.survey-card-content[data-survey-status]');
        if (statusEl) {
          statusEl.innerHTML = '<span class="vits-general-label is-general-gray">종료</span>';
        }

        var submitBtn = document.querySelector('.in-survey .vits-btn-primary');
        if (submitBtn) submitBtn.remove();
      })();
    </script>
  </body>
</html>
