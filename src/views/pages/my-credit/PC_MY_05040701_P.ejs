<% const _src = srcPath; const _public = publicPath; %>
<!DOCTYPE html>
<html lang="ko" class="vits-scope">
  <%- include(`${_src}/views/layout/head.ejs`, {meta_title: '후불결제전자서명-개인신용 제공 동의서'}) %>
  <body class="vits-scope">
    <a href="#skipNav" class="skip-nav">본문 바로가기</a>

    <section class="vits-wrapper">
      <%- include(`${_src}/views/layout/header.ejs`) %>

      <main id="skipNav" class="vits-main">
        <div class="vits-wrap">
          <div class="vits-grid">
            <div class="vits-grid-main vits-main-plp">
              <div class="vits-inner" style="padding: 100px 0">
                <button
                  type="button"
                  class="vits-btn-md vits-btn-outline-secondary"
                  onclick="VitsKendoWindow.open('contractSignedModal')"
                >
                  <span class="text">후불결제전자서명 &gt; 개인신용 정보 수집 · 조회 · 이용 및 제공 동의서 </span>
                </button>
                <!-- prettier-ignore -->

                <% const contractModal = { 
                  id: 'contractSignedModal', 
                  size: '800',
                  title: '개인신용 정보 수집 · 조회 · 이용 및 제공 동의서',                  
                  contentPath: `${_src}/views/pages/kendo-window/my-credit/kw-PC_MY_05040701_P.ejs`,
                  buttons: [{ text: '취소', variant: 'secondary', action: 'close' }, { text: '서명하기', variant: 'primary', action: 'close' }] 
                  }; 
                %> 
                <%- include(`${_src}/views/components/kendo/kendo-window.ejs`, contractModal) %>
              </div>
            </div>
          </div>
        </div>
      </main>

      <%- include(`${_src}/views/layout/footer.ejs`) %>
    </section>

    <%- include(`${_src}/views/layout/footer.links.ejs`) %>

    <!-- S: [REMOVE] 확인용 script - type=signed 시 모달 자동 오픈 + 서명 완료 UI, 개발 적용 시 제거 -->
    <script>
      (function () {
        if (new URLSearchParams(location.search).get('type') !== 'signed') return;
        function run() {
          var c =
            document.querySelector('#contractSignedModal .vits-credit-contract') ||
            document.querySelector('#contractSignedModal .vits-credit-consent');
          if (c) {
            var dates = ['26', '2', '26'];
            [].slice.call(c.querySelectorAll('.contract-date-row input.contract-input')).forEach(function (inp, i) {
              var s = document.createElement('span');
              s.className = 'signed-date';
              s.textContent = dates[i] || inp.getAttribute('data-signed-value') || '';
              inp.parentNode.replaceChild(s, inp);
            });
            c.querySelectorAll('.contract-info-cols input.contract-input').forEach(function (inp) {
              var s = document.createElement('span');
              s.className = 'contract-info-value';
              s.textContent = inp.getAttribute('data-signed-value') || inp.value || inp.placeholder || '';
              inp.parentNode.replaceChild(s, inp);
            });
            c.querySelectorAll('input[type="checkbox"]').forEach(function (cb) {
              cb.checked = true;
            });
          }
          var b = document.querySelector('#contractModal .vits-modal-buttons');
          if (b) {
            b.className = 'vits-modal-buttons is-single';
            b.innerHTML =
              '<button type="button" class="vits-modal-btn vits-modal-btn-primary" onclick="VitsKendoWindow.close(\'contractModal\')"><span class="text">저장하기</span></button>';
          }
          if (typeof VitsKendoWindow !== 'undefined' && VitsKendoWindow.open) VitsKendoWindow.open('contractModal');
        }
        document.readyState === 'loading' ? document.addEventListener('DOMContentLoaded', run) : run();
      })();
    </script>
    <!-- E: [REMOVE] 확인용 script - 개발 적용 시 제거 -->
  </body>
</html>
