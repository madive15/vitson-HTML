<% const _src = srcPath; const _public = publicPath; %>
<!-- prettier-ignore -->
<% var currentStep = 1; %>
<% var totalStep = 4; %>

<!DOCTYPE html>
<!-- 
  [D] vits-scope: 스크롤바 커스텀 범위 제한(운영 전역 scrollbar 충돌 방지)
    - 문서 스크롤 주체가 html/body로 달라질 수 있어 둘 다 클래스 적용 
  -->
<html lang="ko" class="vits-scope">
  <%- include(`${_src}/views/layout/head.ejs`, {meta_title: '후불관리 승인 후'}) %>
  <!-- [D] vits-scope 적용(상단 주석 참고) -->
  <body class="vits-scope">
    <!-- S: Skip Navigation -->
    <a href="#skipNav" class="skip-nav">본문 바로가기</a>
    <!-- E: Skip Navigation -->

    <!-- S: vits-wrapper -->
    <section class="vits-wrapper">
      <%- include(`${_src}/views/layout/header.ejs`) %>

      <!-- S: vits-main -->
      <main id="skipNav" class="vits-main">
        <!-- S: vits-wrap -->
        <div class="vits-wrap">
          <!-- S: vits-grid -->
          <div class="vits-grid">
            <div class="vits-grid-main vits-main-my-credit">
              <div class="vits-inner inner-column">
                <div class="vits-grid-area">
                  <!-- S: vits-grid-side-left -->
                  <%- include(`${_src}/views/layout/lnb/lnb-mypage.ejs`) %>
                  <!-- E: vits-grid-side-left -->

                  <!-- S: vits-grid-main -->
                  <div class="vits-grid-main-content main-content-my-credit">
                    <div class="vits-mypage-content-headline">
                      <h2 class="vits-mypage-content-title">후불 관리</h2>
                      <p class="vits-mypage-content-desc">비츠온의 편리한 후불 결제를 신청해 보세요.</p>
                    </div>

                    <div class="vits-mypage-credit-process">
                      <section class="credit-apply-process">
                        <div class="credit-apply-process-head" data-scss="head">
                          <h3 class="credit-title">후불 신청 프로세스</h3>
                        </div>
                        <div class="credit-apply-process-body" data-scss="body">
                          <div class="vits-step-tab" data-step-scope="orderStep">
                            <!-- 탭 헤더 -->
                            <ul class="vits-step-tab-header">
                              <li
                                class="vits-step-tab-item<%= currentStep === 1 ? ' is-active' : (currentStep > 1 ? ' is-done' : ' is-disabled') %>"
                                data-step-tab="1"
                              >
                                <span class="vits-step-tab-label">탭1</span>
                              </li>
                              <li
                                class="vits-step-tab-item<%= currentStep === 2 ? ' is-active' : (currentStep > 2 ? ' is-done' : ' is-disabled') %>"
                                data-step-tab="2"
                              >
                                <span class="vits-step-tab-label">탭2</span>
                              </li>
                              <li
                                class="vits-step-tab-item<%= currentStep === 3 ? ' is-active' : (currentStep > 3 ? ' is-done' : ' is-disabled') %>"
                                data-step-tab="3"
                              >
                                <span class="vits-step-tab-label">탭3</span>
                              </li>
                              <li
                                class="vits-step-tab-item<%= currentStep === 4 ? ' is-active' : (currentStep > 4 ? ' is-done' : ' is-disabled') %>"
                                data-step-tab="4"
                              >
                                <span class="vits-step-tab-label">탭4</span>
                              </li>
                            </ul>

                            <!-- 탭 패널 -->
                            <div class="vits-step-tab-panels">
                              <div
                                class="vits-step-tab-panel<%= currentStep === 1 ? ' is-active' : '' %>"
                                data-step-panel="1"
                              >
                                <div class="vits-step-tab-content">
                                  <p>탭1 시안 내용</p>
                                </div>
                              </div>
                              <div
                                class="vits-step-tab-panel<%= currentStep === 2 ? ' is-active' : '' %>"
                                data-step-panel="2"
                              >
                                <div class="vits-step-tab-content">
                                  <p>탭2 시안 내용</p>
                                </div>
                              </div>
                              <div
                                class="vits-step-tab-panel<%= currentStep === 3 ? ' is-active' : '' %>"
                                data-step-panel="3"
                              >
                                <div class="vits-step-tab-content">
                                  <p>탭3 시안 내용</p>
                                </div>
                              </div>
                              <div
                                class="vits-step-tab-panel<%= currentStep === 4 ? ' is-active' : '' %>"
                                data-step-panel="4"
                              >
                                <div class="vits-step-tab-content">
                                  <p>탭4 시안 내용</p>
                                </div>
                              </div>
                            </div>

                            <!-- 테스트 버튼 (나중에 삭제) -->
                            <% if (currentStep < totalStep) { %>
                            <button type="button" class="vits-test-btn" data-step-complete>다음 스텝으로 이동</button>
                            <% } %>

                            <!-- [D] 테스트용 스크립트 (나중에 삭제) -->
                            <script>
                              (function () {
                                var scope = document.querySelector('[data-step-scope="orderStep"]');
                                var btn = scope.querySelector('.vits-test-btn');
                                var totalSteps = scope.querySelectorAll('[data-step-panel]').length;

                                scope.addEventListener('stepTab:complete', function (e) {
                                  if (e.detail.isLast || e.detail.nextStep >= totalSteps) {
                                    btn.style.display = 'none';
                                  }
                                });
                              })();
                            </script>
                          </div>
                        </div>
                      </section>
                    </div>
                  </div>

                  <!-- E: vits-grid-main -->
                </div>
              </div>
            </div>
          </div>
          <!-- E: vits-grid -->
        </div>
        <!-- E: vits-wrap -->
      </main>
      <!-- E: vits-main -->

      <%- include(`${_src}/views/layout/footer.ejs`) %>
    </section>
    <!-- E: vits-wrapper -->

    <%- include(`${_src}/views/layout/footer.links.ejs`) %>
  </body>
</html>
