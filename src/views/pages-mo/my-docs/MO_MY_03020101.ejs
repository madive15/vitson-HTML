<% const _src = srcPath; const _public = publicPath; %>
<!-- prettier-ignore -->
<%
  var quoteList = [
   {
      number: 'QT-20241215-001',
      score: '683.5',
      name: '프리미엄 사무용 의자 외 2건(상품명) 프리미엄 사무용 의자 외 2건(상품명)',
      createdDate: '2024.12.15 13:22:10',
      expireDate: '2024.12.22',
      priceList: [
        { label: '공급가', value: '418,000원' },
        { label: '부가세', value: '41,800원' },
        { label: '합계', value: '459,800원', isTotal: true },
      ],
    },
    {
      number: 'QT-20250103-047',
      score: null,
      // 말줄임 확인용 - 긴 상품명
      name: '2025년 1분기 사무환경 개선을 위한 프리미엄 인체공학 사무용 의자(메쉬백/요추지지대/높이조절/팔걸이포함) 외 15건',
      createdDate: '2025.01.03 09:15:33',
      expireDate: '2025.01.10',
      priceList: [
        { label: '공급가', value: '2,340,000원' },
        { label: '부가세', value: '234,000원' },
        { label: '합계', value: '2,574,000원', isTotal: true },
      ],
    },
    {
      number: 'QT-20250218-012',
      score: null,
      name: '모니터 받침대 및 키보드 트레이 세트',
      createdDate: '2025.02.18 14:05:50',
      expireDate: '2025.02.25',
      priceList: [
        { label: '공급가', value: '87,000원' },
        { label: '부가세', value: '8,700원' },
        { label: '합계', value: '95,700원', isTotal: true },
      ],
    },
  ];
%>

<!DOCTYPE html>
<html lang="ko" class="vm-scope">
  <%- include(`${_src}/views/layout-mo/header/head.ejs`, {meta_title: '견적서 조회'}) %>
  <body class="vm-scope">
    <!-- S: Skip Navigation -->
    <a href="#skipNav" class="skip-nav">본문 바로가기</a>
    <!-- E: Skip Navigation -->

    <!-- S: vm-wrapper -->
    <section class="vm-wrapper">
      <!-- S: vm-wrap -->
      <div class="vm-wrap wrap-my-docs">
        <!-- S: vm-content-wrap -->
        <div class="vm-content-wrap">
          <!-- prettier-ignore -->
          <%- include(`${_src}/views/layout-mo/header/index.ejs`, { 
            type: 'nav-bar', title: '견적서 조회' 
          }) %>

          <!-- S: vm-main -->
          <main id="skipNav" class="vm-main">
            <div class="vm-main-content main-content-my-docs">
              <div class="vm-mypage-docs">
                <!-- 필터 -->
                <!-- prettier-ignore -->
                <%- include(`${_src}/views/components-mo/filter/index.ejs`, { 
                  type: 'docs',
                }) %>

                <div class="vm-mypage-docs-group">
                  <!-- [D] 견적서 1건 이상 -->
                  <div class="vm-mypage-docs-list">
                    <div class="vm-mypage-docs-controls">
                      <p class="docs-item-count"><span>총</span><span class="count-total">3</span><span>개</span></p>
                    </div>
                    <div class="docs-items">
                      <!-- prettier-ignore -->
                      <% quoteList.forEach(function(item) { %>
                      <!-- prettier-ignore -->
                      <%- include(`${_src}/views/components-mo/filter/filter-docs-list-item.ejs`, {
                          type: 'quote',
                          number: item.number,
                          score: item.score,
                          name: item.name,
                          createdLabel: '작성일시',
                          expireLabel: '유효기간',
                          createdDate: item.createdDate,
                          expireDate: item.expireDate,
                          priceList: item.priceList,
                        }) %>
                      <% }); %>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </main>
          <!-- E: vm-main -->

          <%- include(`${_src}/views/layout-mo/footer/index.ejs`) %>
        </div>
        <!-- E: vm-content-wrap -->

        <!-- S: vm-bottom-group -->
        <!-- prettier-ignore -->
        <%- include(`${_src}/views/layout-mo/bottom-bar/index.ejs`, { 
          type: 'tab-bar', currentTab: 'mypage' 
        }) %>
        <!-- E: vm-bottom-group -->

        <!-- S: 팝업 영역 -->
        <!-- E: 팝업 영역 -->
      </div>
      <!-- E: vm-wrap -->
    </section>
    <!-- E: vm-wrapper -->

    <%- include(`${_src}/views/layout/footer.links.ejs`) %>

    <!-- S: [REMOVE] 확인용 임시 코드 - 개발 적용 시 제거 -->
    <script>
      $(function () {
        // 필터 초기화
        $('.docs-filter-reset').on('click', function () {
          // datepicker reset
          var picker = VmKendoRangePicker.getInstance('#vm-docs-filter-daterange');
          if (picker) picker.reset();

          // select 초기화 (전체 = '0')
          var $select = $('[data-select-id="docs-filter-select"]').closest('[data-vits-select]');
          $select.find('[data-vits-select-value]').text('전체');
          $select.removeClass('is-selected');
          $select.find('[data-value]').each(function () {
            var isSelected = $(this).data('value') === '0';
            $(this)
              .toggleClass('vits-select-selected', isSelected)
              .attr('aria-selected', isSelected ? 'true' : 'false');
          });
          $select.find('[data-vits-select-hidden]').val('0');

          // 조회연도 초기화 (전체 = '0')
          var $yearSelect = $('[data-select-id="docs-filter-year-select"]').closest('[data-vits-select]');
          $yearSelect.find('[data-vits-select-value]').text('전체');
          $yearSelect.removeClass('is-selected');
          $yearSelect.find('[data-value]').each(function () {
            var isSelected = $(this).data('value') === '0';
            $(this)
              .toggleClass('vits-select-selected', isSelected)
              .attr('aria-selected', isSelected ? 'true' : 'false');
          });
          $yearSelect.find('[data-vits-select-hidden]').val('0');
        });
      });
    </script>
    <!-- E: [REMOVE] 확인용 임시 코드 - 개발 적용 시 제거 -->
  </body>
</html>
