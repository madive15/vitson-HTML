<% const _src = srcPath; const _public = publicPath; %>
<!-- prettier-ignore -->
<% 
  const inquiryList = [
    {
      isAnswered: false,
      category: '배송 > 배송일정',
      title: '언제쯤 도착할까요?',
      date: '2027-01-01',
    },
    {
      isAnswered: true,
      category: '배송 > 배송일정',
      title: '언제쯤 도착할까요?',
      date: '2026-01-01',
    },
    {
      isAnswered: true,
      category: '상품문의 > 상품문의',
      title: '상품을 변경하고 싶어요',
      date: '2025-01-01',
    },
  ];
 %>

<!DOCTYPE html>
<html lang="ko" class="vm-scope">
  <%- include(`${_src}/views/layout-mo/header/head.ejs`, {meta_title: '1:1문의-목록'}) %>
  <body class="vm-scope">
    <!-- S: Skip Navigation -->
    <a href="#skipNav" class="skip-nav">본문 바로가기</a>
    <!-- E: Skip Navigation -->

    <!-- S: vm-wrapper -->
    <section class="vm-wrapper">
      <!-- S: vm-wrap -->
      <div class="vm-wrap wrap-my-inquiry">
        <!-- S: vm-content-wrap -->
        <div class="vm-content-wrap">
          <!-- prettier-ignore -->
          <%- include(`${_src}/views/layout-mo/header/index.ejs`, { 
            type: 'nav-bar', title: '1:1 문의' 
          }) %>

          <!-- S: vm-main -->
          <main id="skipNav" class="vm-main">
            <div class="vm-main-content main-content-my-inquiry">
              <div class="vm-mypage-inquiry">
                <div class="vm-mypage-inquiry-group">
                  <div class="vm-mypage-inquiry-buttons">
                    <!-- prettier-ignore -->
                    <%- include(`${_src}/views/components/button/button.ejs`, {
                      size:'sm', 
                      variant: 'secondary', 
                      text: '카카오톡 문의',
                      iconLeft: true,
                      iconName: 'ic-kakao'
                    }) %>
                    <!-- prettier-ignore -->
                    <%- include(`${_src}/views/components/button/button.ejs`, {
                      size:'sm', 
                      variant: 'primary', 
                      text: '작성하기',
                      iconLeft: true,
                      iconName: 'ic-plus'
                    }) %>
                  </div>

                  <!-- [D] 문의 1개 이상 -->
                  <div class="vm-mypage-inquiry-list">
                    <ul class="inquiry-list">
                      <% inquiryList.forEach(function(item) { %>
                      <li>
                        <a href="#!" class="inquiry-list-item">
                          <div class="inquiry-list-item-head">
                            <%- include(`${_src}/views/components/label/general-label.ejs`, { text: item.isAnswered ?
                            '답변완료' : '답변대기', variant: item.isAnswered ? 'green' : 'gray' }) %>
                            <p class="inquiry-list-item-text"><%= item.category %></p>
                          </div>
                          <div class="inquiry-list-item-body">
                            <p class="inquiry-list-item-title"><%= item.title %></p>
                          </div>
                          <div class="inquiry-list-item-footer">
                            <p class="inquiry-list-item-text"><%= item.date %></p>
                          </div>
                        </a>
                      </li>
                      <% }) %>
                    </ul>
                  </div>

                  <!-- [D] 문의 1개 미만 -->
                  <div class="vm-mypage-inquiry-empty" style="display: none">
                    <!-- prettier-ignore -->
                    <%- include(`${_src}/views/components/empty-state.ejs`, {
                      iconName: 'document-paper',
                      title: '등록된 1:1 문의 내역이 없습니다',
                    }) %>
                  </div>
                </div>
              </div>
            </div>
          </main>
          <!-- E: vm-main -->

          <%- include(`${_src}/views/layout-mo/footer/index.ejs`) %>
        </div>
        <!-- E: vm-content-wrap -->

        <!-- S: vm-bottom-group -->
        <!-- prettier-ignore -->
        <%- include(`${_src}/views/layout-mo/bottom-bar/index.ejs`, { 
          type: 'tab-bar', currentTab: 'mypage' 
        }) %>
        <!-- E: vm-bottom-group -->

        <!-- S: 팝업 영역 -->
        <!-- E: 팝업 영역 -->
      </div>
      <!-- E: vm-wrap -->
    </section>
    <!-- E: vm-wrapper -->

    <%- include(`${_src}/views/layout/footer.links.ejs`) %>

    <!-- S: [REMOVE] 확인용 임시 코드 - 개발 적용 시 제거 -->
    <script>
      $(function () {
        var type = new URLSearchParams(location.search).get('type');

        // type=empty: 빈 상태
        if (type === 'empty') {
          $('.vm-mypage-inquiry-list').hide();
          $('.vm-mypage-inquiry-empty').show();
        } else {
          $('.vm-mypage-inquiry-list').show();
          $('.vm-mypage-inquiry-empty').hide();
        }
      });
    </script>
    <!-- E: [REMOVE] 확인용 임시 코드 - 개발 적용 시 제거 -->
  </body>
</html>
